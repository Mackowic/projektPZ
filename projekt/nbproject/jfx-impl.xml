<?xml version="1.0" encoding="UTF-8"?>
<!--
*** GENERATED FROM TEMPLATE - DO NOT EDIT ***
***       EDIT ../build.xml INSTEAD       ***
-->

<project name="jfx-impl" default="jfx-deployment" basedir=".." xmlns:j2seproject1="http://www.netbeans.org/ns/j2se-project/1" 
         xmlns:j2seproject3="http://www.netbeans.org/ns/j2se-project/3" xmlns:fx="javafx:com.sun.javafx.tools.ant">
    <description>JavaFX-specific Ant calls</description>


    <!-- Empty placeholders for easier customization in ../build.xml -->
    
    <target name="-pre-jfx-jar">
        <!-- Called right before <fx:jar> task. You can override this target in the ../build.xml file. -->
    </target>

    <target name="-post-jfx-jar">
        <!-- Called right after <fx:jar> task. You can override this target in the ../build.xml file. -->
    </target>

    <target name="-pre-jfx-deploy">
        <!-- Called right before <fx:deploy> task. You can override this target in the ../build.xml file. -->
    </target>

    <target name="-post-jfx-deploy">
        <!-- Called right after <fx:deploy> task. You can override this target in the ../build.xml file. -->
    </target>
    
    <target name="-pre-jfx-native">
        <!-- Called right before the call to native packager (just after -pre-jfx-deploy). You can override this target in the ../build.xml file. -->
    </target>

    <target name="-post-jfx-native">
        <!-- Called right after the call to native packager (just after -post-jfx-deploy). You can override this target in the ../build.xml file. -->
    </target>
    
    
    <!-- Check system and JDK version -->

    <target name="-check-operating-system">
        <condition property="running.on.mac">
            <os family="mac"/>
        </condition>
        <condition property="running.on.unix">
            <os family="unix"/>
        </condition>
        <condition property="running.on.windows">
            <os family="windows"/>
        </condition>
        <echo message="running.on.mac = ${running.on.mac}" level="verbose"/>
        <echo message="running.on.unix = ${running.on.unix}" level="verbose"/>
        <echo message="running.on.windows = ${running.on.windows}" level="verbose"/>
    </target>

    <target name="-check-platform-home-fxsdk-java" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.platform.home.fxsdk.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}java"/>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-fxsdk-java" depends="-check-platform-home-fxsdk-java" if="do.set.platform.home.fxsdk.java">
        <property name="active.platform.home.java.executable" value="${javafx.sdk}${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-java" if="platform.home">
        <condition property="do.set.platform.home.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${platform.home}${file.separator}bin${file.separator}java"/>
                    <available file="${platform.home}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-java" depends="-set-platform-home-fxsdk-java,-check-platform-home-java" if="do.set.platform.home.java">
        <property name="active.platform.home.java.executable" value="${platform.home}${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-probjdk-java" unless="active.platform.home.java.executable">
        <condition property="do.set.platform.home.probjdk.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}java"/>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-probjdk-java" depends="-set-platform-home-java,-check-platform-home-probjdk-java" if="do.set.platform.home.probjdk.java">
        <property name="active.platform.home.java.executable" value="${java.home}${file.separator}..${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-envjdk-java" unless="active.platform.home.java.executable">
        <property environment="env"/>
        <condition property="do.set.platform.home.envjdk.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}java"/>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-envjdk-java" depends="-set-platform-home-probjdk-java,-check-platform-home-envjdk-java" if="do.set.platform.home.envjdk.java">
        <property environment="env"/>
        <property name="active.platform.home.java.executable" value="${env.JAVA_HOME}${file.separator}bin${file.separator}java"/>
    </target>
    <target name="-check-platform-home-fxrt-java" depends="-check-property-javafx.runtime" if="javafx.runtime.defined">
        <condition property="do.set.platform.home.fxrt.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}java"/>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-fxrt-java" depends="-set-platform-home-envjdk-java,-check-platform-home-fxrt-java" if="do.set.platform.home.fxrt.java">
        <property name="active.platform.home.java.executable" value="${javafx.runtime}${file.separator}bin${file.separator}java"/>
        <echo message="Warning: java executable not found in JDK, evaluating java executable in RT instead." level="info"/>
    </target>
    <target name="-check-platform-home-jre-java" unless="active.platform.home.java.executable">
        <condition property="do.set.platform.home.jre.java">
            <and>
                <not><isset property="active.platform.home.java.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}bin${file.separator}java"/>
                    <available file="${java.home}${file.separator}bin${file.separator}java.exe"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-platform-home-jre-java" depends="-set-platform-home-fxrt-java,-check-platform-home-jre-java" if="do.set.platform.home.jre.java">
        <property name="active.platform.home.java.executable" value="${java.home}${file.separator}bin${file.separator}java"/>
        <echo message="Warning: java executable not found in JDK, evaluating java executable in RT instead." level="info"/>
    </target>
    <target name="-check-platform-home" depends="-set-platform-home-jre-java">
        <echo message="active.platform.home.java.executable = ${active.platform.home.java.executable}" level="verbose"/>
        <fail message="Error:${line.separator}java executable not found !" unless="active.platform.home.java.executable"/>
    </target>
        
    <target name="-check-jdk-version" depends="-do-init,-check-platform-home" unless="jdk-version-checked-in-jfximpl">
        <local name="version-output"/>
        <exec executable="${active.platform.home.java.executable}" outputproperty="version-output">
            <arg value="-version"/>
        </exec>
        <echo message="version-output:${line.separator}${version-output}" level="verbose"/>
        <condition property="have-jdk-older-than-1.6">
            <or>
                <contains string="${version-output}" substring="java version &quot;1.0"/>
                <contains string="${version-output}" substring="java version &quot;1.1"/>
                <contains string="${version-output}" substring="java version &quot;1.2"/>
                <contains string="${version-output}" substring="java version &quot;1.3"/>
                <contains string="${version-output}" substring="java version &quot;1.4"/>
                <contains string="${version-output}" substring="java version &quot;1.5"/>
            </or>
        </condition>
        <fail message="Error:${line.separator}JavaFX 2.0+ projects require JDK version 1.6+ !" if="have-jdk-older-than-1.6"/>
        <condition property="have-jdk-7u4or5-mac">
            <and>
                <or>
                    <contains string="${version-output}" substring="java version &quot;1.7.0_04"/>
                    <contains string="${version-output}" substring="java version &quot;1.7.0_05"/>
                </or>
                <os family="mac"/>
            </and>
        </condition>
        <condition property="have-jdk-pre7u6">
            <or>
                <isset property="have-jdk-older-than-1.6"/>
                <contains string="${version-output}" substring="java version &quot;1.6"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0&quot;"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_01"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_02"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_03"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_04"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_05"/>
            </or>
        </condition>
        <condition property="have-jdk-pre7u14">
            <or>
                <isset property="have-jdk-pre7u6"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_06"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_07"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_08"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_09"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_10"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_11"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_12"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_13"/>
            </or>
        </condition>
        <property name="jdk-version-checked-in-jfximpl" value="true"/>
        <echo message="have-jdk-7u4or5-mac = ${have-jdk-7u4or5-mac}" level="verbose"/>
        <echo message="have-jdk-pre7u6 = ${have-jdk-pre7u6}" level="verbose"/>
        <echo message="have-jdk-pre7u14 = ${have-jdk-pre7u14}" level="verbose"/>
    </target>
        
    <target name="-check-ant-jre-version" unless="ant-jre-version-checked-in-jfximpl">
        <local name="version-output"/>
        <exec executable="${java.home}${file.separator}bin${file.separator}java" outputproperty="version-output">
            <arg value="-version"/>
        </exec>
        <echo message="version-output:${line.separator}${version-output}" level="verbose"/>
        <condition property="have-ant-jre-pre7u6">
            <or>
                <contains string="${version-output}" substring="java version &quot;1.0"/>
                <contains string="${version-output}" substring="java version &quot;1.1"/>
                <contains string="${version-output}" substring="java version &quot;1.2"/>
                <contains string="${version-output}" substring="java version &quot;1.3"/>
                <contains string="${version-output}" substring="java version &quot;1.4"/>
                <contains string="${version-output}" substring="java version &quot;1.5"/>
                <contains string="${version-output}" substring="java version &quot;1.6"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0&quot;"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_01"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_02"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_03"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_04"/>
                <contains string="${version-output}" substring="java version &quot;1.7.0_05"/>
            </or>
        </condition>
        <condition property="have-jdk7-css2bin-bug">
            <!-- as of NB7.4 release date the external css-to-bss converter is unreliable in all JDK7 versions before 7u40 (with exception of 7u14)-->
            <and>
                <contains string="${version-output}" substring="java version &quot;1.7"/>
                <not><matches string="${version-output}" pattern="\bjava version &quot;1\.7\.0_(14|[4-9].)"/></not>
            </and>
        </condition>
        <property name="ant-jre-version-checked-in-jfximpl" value="true"/>
        <echo message="have-ant-jre-pre7u6 = ${have-ant-jre-pre7u6}" level="verbose"/>
        <echo message="have-jdk7-css2bin-bug = ${have-jdk7-css2bin-bug}" level="verbose"/>
    </target>

    <target name="-check-jdk-7u4or5-mac" depends="-check-jdk-version" if="have-jdk-7u4or5-mac">
        <fail message="Error:${line.separator}JDK 7u4 Mac and 7u5 Mac do not support WebStart and JavaFX 2.0+ browser plugin technologies.${line.separator}Please upgrade to JDK 7u6 or later."/>
    </target>

    
    <!-- Check availability of JavaFX SDK deployment support (ant-javafx.jar) -->

    <target name="-check-endorsed-javafx-ant-classpath">
        <condition property="endorsed-javafx-ant-classpath-available">
            <and>
                <isset property="endorsed.javafx.ant.classpath"/>
                <not>
                    <equals arg1="${endorsed.javafx.ant.classpath}" arg2=""/>
                </not>
            </and>
        </condition>
        <echo message="endorsed-javafx-ant-classpath-available = ${endorsed-javafx-ant-classpath-available}" level="verbose"/>
    </target>

    <target name="-check-property-javafx.sdk">
        <echo message="javafx.sdk = ${javafx.sdk}" level="verbose"/>
        <condition property="javafx.sdk.defined">
            <and>
                <isset property="javafx.sdk"/>
                <not><contains string="${javafx.sdk}" substring="$${platform" casesensitive="false"/></not>
            </and>
        </condition>
        <condition property="javafx.sdk.missing+default">
            <and>
                <equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/>
                <not><isset property="javafx.sdk.defined"/></not>
            </and>
        </condition>
        <condition property="javafx.sdk.missing-default">
            <and>
                <not><equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/></not>
                <not><isset property="javafx.sdk.defined"/></not>
            </and>
        </condition>
        <echo message="javafx.sdk.defined = ${javafx.sdk.defined}" level="verbose"/>
        <echo message="javafx.sdk.missing+default = ${javafx.sdk.missing+default}" level="verbose"/>
        <echo message="javafx.sdk.missing-default = ${javafx.sdk.missing-default}" level="verbose"/>
    </target>

    <target name="-check-ant-javafx-in-fxsdk-lib" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.ant-javafx.in.fxsdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-fxsdk-lib" depends="-check-ant-javafx-in-fxsdk-lib" if="do.set.ant-javafx.in.fxsdk.lib">
        <property name="ant-javafx.jar.location" value="${javafx.sdk}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-fxsdk-tools" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.ant-javafx.in.fxsdk.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-fxsdk-tools" depends="-set-ant-javafx-in-fxsdk-lib,-check-ant-javafx-in-fxsdk-tools" if="do.set.ant-javafx.in.fxsdk.tools">
        <property name="ant-javafx.jar.location" value="${javafx.sdk}${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-platform-home-lib" if="platform.home">
        <condition property="do.set.ant-javafx.in.platform.home.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${platform.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-platform-home-lib" depends="-set-ant-javafx-in-fxsdk-tools,-check-ant-javafx-in-platform-home-lib" if="do.set.ant-javafx.in.platform.home.lib">
        <property name="ant-javafx.jar.location" value="${platform.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-platform-home-tools" if="platform.home">
        <condition property="do.set.ant-javafx.in.platform.home.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${platform.home}${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-platform-home-tools" depends="-set-ant-javafx-in-platform-home-lib,-check-ant-javafx-in-platform-home-tools" if="do.set.ant-javafx.in.platform.home.tools">
        <property name="ant-javafx.jar.location" value="${platform.home}${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-probjdk-lib" unless="ant-javafx.jar.location">
        <condition property="do.set.ant-javafx.in.probjdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${java.home}${file.separator}..${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-probjdk-lib" depends="-set-ant-javafx-in-platform-home-tools,-check-ant-javafx-in-probjdk-lib" if="do.set.ant-javafx.in.probjdk.lib">
        <property name="ant-javafx.jar.location" value="${java.home}${file.separator}..${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-probjdk-tools" unless="ant-javafx.jar.location">
        <condition property="do.set.ant-javafx.in.probjdk.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${java.home}${file.separator}..${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-probjdk-tools" depends="-set-ant-javafx-in-probjdk-lib,-check-ant-javafx-in-probjdk-tools" if="do.set.ant-javafx.in.probjdk.tools">
        <property name="ant-javafx.jar.location" value="${java.home}${file.separator}..${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-macjdk-lib" unless="ant-javafx.jar.location">
        <condition property="do.set.ant-javafx.in.macjdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${java.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-macjdk-lib" depends="-set-ant-javafx-in-probjdk-tools,-check-ant-javafx-in-macjdk-lib" if="do.set.ant-javafx.in.macjdk.lib">
        <property name="ant-javafx.jar.location" value="${java.home}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-envjdk-lib" unless="ant-javafx.jar.location">
        <property environment="env"/>
        <condition property="do.set.ant-javafx.in.envjdk.lib">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}lib${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-envjdk-lib" depends="-set-ant-javafx-in-macjdk-lib,-check-ant-javafx-in-envjdk-lib" if="do.set.ant-javafx.in.envjdk.lib">
        <property name="ant-javafx.jar.location" value="${env.JAVA_HOME}${file.separator}lib${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-check-ant-javafx-in-envjdk-tools" unless="ant-javafx.jar.location">
        <property environment="env"/>
        <condition property="do.set.ant-javafx.in.envjdk.tools">
            <and>
                <not><isset property="ant-javafx.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}tools${file.separator}ant-javafx.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-ant-javafx-in-envjdk-tools" depends="-set-ant-javafx-in-envjdk-lib,-check-ant-javafx-in-envjdk-tools" if="do.set.ant-javafx.in.envjdk.tools">
        <property name="ant-javafx.jar.location" value="${env.JAVA_HOME}${file.separator}tools${file.separator}ant-javafx.jar"/>
    </target>
    <target name="-pre-check-ant-javafx-version" depends="-set-ant-javafx-in-envjdk-tools" unless="ant-javafx-version-already-checked-in-jfximpl">
        <condition property="do.check.ant-javafx.version">
            <and>
                <isset property="ant-javafx.jar.location"/>
                <not><isset property="ant-javafx-version-already-checked-in-jfximpl"/></not>
            </and>
        </condition>
    </target>
    <target name="-set-endorsed-javafx-ant-classpath" depends="-check-endorsed-javafx-ant-classpath,-pre-check-ant-javafx-version" if="endorsed-javafx-ant-classpath-available">
        <property name="javafx.ant.classpath" value="${endorsed.javafx.ant.classpath}:${ant-javafx.jar.location}"/>
    </target>
    <target name="-set-javafx-ant-classpath" depends="-check-endorsed-javafx-ant-classpath,-pre-check-ant-javafx-version" unless="endorsed-javafx-ant-classpath-available">
        <property name="javafx.ant.classpath" value="${ant-javafx.jar.location}"/>
    </target>
    <target name="-check-ant-javafx-version" depends="-pre-check-ant-javafx-version,
            -set-endorsed-javafx-ant-classpath,-set-javafx-ant-classpath" if="do.check.ant-javafx.version">
        <echo message="ant-javafx.jar.location = ${ant-javafx.jar.location}" level="verbose"/>
        <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"
            uri="javafx:com.sun.javafx.tools.ant"
            classpath="${javafx.ant.classpath}"/>
        <condition property="have-fx-ant-init">
            <typefound name="javafx:com.sun.javafx.tools.ant:init-ant"/>
        </condition>
        <property name="ant-javafx-version-already-checked-in-jfximpl" value="true"/>
        <echo message="have-fx-ant-init = ${have-fx-ant-init}" level="verbose"/>
    </target>
    <target name="-check-jfx-sdk-version-old" depends="-check-ant-javafx-version" unless="have-fx-ant-init">
        <property name="javafx.ant.version" value="1.0"/>
    </target>
    <target name="-check-jfx-sdk-version-new" depends="-check-ant-javafx-version" if="have-fx-ant-init">
        <fx:init-ant/>
        <condition property="have-fx-ant-api-1.1">
            <!-- new features from JavaFX 2.0.2 are available in API version 1.1 or later -->
            <matches pattern="1.[1-9]" string="${javafx.ant.version}"/>
        </condition>
        <condition property="have-fx-ant-api-1.2">
            <!-- new features from JavaFX 2.2 are available in API version 1.2 or later -->
            <matches pattern="1.[2-9]" string="${javafx.ant.version}"/>
        </condition>
    </target>
    <target name="-check-jfx-sdk-version" depends="-check-jfx-sdk-version-old, -check-jfx-sdk-version-new" unless="jfx.sdk.version.checked">
        <echo message="Detected JavaFX Ant API version ${javafx.ant.version}" level="info"/>
        <echo message="have-fx-ant-api-1.1 = ${have-fx-ant-api-1.1}" level="verbose"/>
        <echo message="have-fx-ant-api-1.2 = ${have-fx-ant-api-1.2}" level="verbose"/>
        <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
        <property name="jfx.sdk.version.checked" value="true"/>
    </target>

    <target name="-check-jfx-deployment" depends="-check-jdk-version,-check-jfx-sdk-version">
        <condition property="jfx-deployment-available">
            <and>
                <or>
                    <isset property="do.set.ant-javafx.in.fxsdk.lib"/>
                    <isset property="do.set.ant-javafx.in.fxsdk.tools"/>
                    <isset property="do.set.ant-javafx.in.platform.home.lib"/>
                    <isset property="do.set.ant-javafx.in.platform.home.tools"/>
                    <isset property="do.set.ant-javafx.in.probjdk.lib"/>
                    <isset property="do.set.ant-javafx.in.probjdk.tools"/>
                    <isset property="do.set.ant-javafx.in.envjdk.lib"/>
                    <isset property="do.set.ant-javafx.in.envjdk.tools"/>
                </or>
                <isset property="ant-javafx.jar.location"/>
            </and>
        </condition>
        <condition property="jfx-deployment-missing+jdk7u6">
            <and>
                <not><isset property="jfx-deployment-available"/></not>
                <not><isset property="have-jdk-pre7u6"/></not>
            </and>
        </condition>
        <condition property="jfx-deployment-missing+javafx.sdk.missing+default">
            <and>
                <not><isset property="jfx-deployment-available"/></not>
                <isset property="have-jdk-pre7u6"/>
                <isset property="javafx.sdk.missing+default"/>
            </and>
        </condition>
        <condition property="jfx-deployment-missing+javafx.sdk.missing-default">
            <and>
                <not><isset property="jfx-deployment-available"/></not>
                <isset property="have-jdk-pre7u6"/>
                <isset property="javafx.sdk.missing-default"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}JavaFX deployment library not found in active JDK.${line.separator}Please check that the JDK is correctly installed and its version is at least 7u4 on Mac or 7u6 on other systems." if="jfx-deployment-missing+jdk7u6"/>
        <fail message="Error:${line.separator}JavaFX deployment library not found.${line.separator}JavaFX SDK path undefined. Check the definition of ${platform.active} in Java Platform Manager${line.separator}(or directly the properties platform.active and javafx.sdk in project.properties file).${line.separator}Note: If missing, the default JavaFX-enabled platform gets created automatically when creating a new JavaFX Project." if="jfx-deployment-missing+javafx.sdk.missing+default"/>
        <fail message="Error:${line.separator}JavaFX deployment library not found.${line.separator}JavaFX SDK path undefined. Check the definition of ${platform.active} in Java Platform Manager${line.separator}(or directly the properties platform.active and javafx.sdk in project.properties file)." if="jfx-deployment-missing+javafx.sdk.missing-default"/>
        <fail message="Error:${line.separator}JavaFX deployment library not found." unless="jfx-deployment-available"/>
        <echo message="jfx-deployment-available = ${jfx-deployment-available}" level="verbose"/>
    </target>
    
    
    <!-- Check availability of main JavaFX runtime jar (jfxrt.jar) -->

    <target name="-check-property-javafx.runtime">
        <echo message="javafx.runtime = ${javafx.runtime}" level="verbose"/>
        <condition property="javafx.runtime.defined">
            <and>
                <isset property="javafx.runtime"/>
                <not><contains string="${javafx.runtime}" substring="$${platform" casesensitive="false"/></not>
            </and>
        </condition>
        <condition property="javafx.runtime.missing+default">
            <and>
                <equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/>
                <not><isset property="javafx.runtime.defined"/></not>
            </and>
        </condition>
        <condition property="javafx.runtime.missing-default">
            <and>
                <not><equals arg1="${platform.active}" arg2="Default_JavaFX_Platform" trim="true"/></not>
                <not><isset property="javafx.runtime.defined"/></not>
            </and>
        </condition>
        <echo message="javafx.runtime.defined = ${javafx.runtime.defined}" level="verbose"/>
        <echo message="javafx.runtime.missing+default = ${javafx.runtime.missing+default}" level="verbose"/>
        <echo message="javafx.runtime.missing-default = ${javafx.runtime.missing-default}" level="verbose"/>
    </target>

    <target name="-check-jfxrt-in-fxrt" depends="-check-property-javafx.runtime" if="javafx.runtime.defined">
        <condition property="do.set.jfxrt.in.fxrt.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.runtime}${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.fxrt.new">
            <and>
                <not><isset property="do.set.jfxrt.in.fxrt.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.runtime}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-fxrt-old" depends="-check-jfxrt-in-fxrt" if="do.set.jfxrt.in.fxrt.old">
        <property name="jfxrt.jar.location" value="${javafx.runtime}${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-fxrt-new" depends="-set-jfxrt-in-fxrt-old,-check-jfxrt-in-fxrt" if="do.set.jfxrt.in.fxrt.new">
        <property name="jfxrt.jar.location" value="${javafx.runtime}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-fxsdk-jre" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.jfxrt.in.fxsdk.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.fxsdk.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.fxsdk.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-fxsdk-jre-old" depends="-set-jfxrt-in-fxrt-new,-check-jfxrt-in-fxsdk-jre" if="do.set.jfxrt.in.fxsdk.jre.old">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-fxsdk-jre-new" depends="-set-jfxrt-in-fxsdk-jre-old,-check-jfxrt-in-fxsdk-jre" if="do.set.jfxrt.in.fxsdk.jre.new">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-fxsdk-rt" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.jfxrt.in.fxsdk.rt.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.fxsdk.rt.new">
            <and>
                <not><isset property="do.set.jfxrt.in.fxsdk.rt.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-fxsdk-rt-old" depends="-set-jfxrt-in-fxsdk-jre-new,-check-jfxrt-in-fxsdk-rt" if="do.set.jfxrt.in.fxsdk.rt.old">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-fxsdk-rt-new" depends="-set-jfxrt-in-fxsdk-rt-old,-check-jfxrt-in-fxsdk-rt" if="do.set.jfxrt.in.fxsdk.rt.new">
        <property name="jfxrt.jar.location" value="${javafx.sdk}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-platform-home-jre" if="platform.home">
        <condition property="do.set.jfxrt.in.platform.home.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.platform.home.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.platform.home.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-platform-home-jre-old" depends="-set-jfxrt-in-fxsdk-rt-new,-check-jfxrt-in-platform-home-jre" if="do.set.jfxrt.in.platform.home.jre.old">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-platform-home-jre-new" depends="-set-jfxrt-in-platform-home-jre-old,-check-jfxrt-in-platform-home-jre" if="do.set.jfxrt.in.platform.home.jre.new">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-platform-home-rt" if="platform.home">
        <condition property="do.set.jfxrt.in.platform.home.rt.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.platform.home.rt.new">
            <and>
                <not><isset property="do.set.jfxrt.in.platform.home.rt.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${platform.home}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-platform-home-rt-old" depends="-set-jfxrt-in-platform-home-jre-new,-check-jfxrt-in-platform-home-rt" if="do.set.jfxrt.in.platform.home.rt.old">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}rt${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-platform-home-rt-new" depends="-set-jfxrt-in-platform-home-rt-old,-check-jfxrt-in-platform-home-rt" if="do.set.jfxrt.in.platform.home.rt.new">
        <property name="jfxrt.jar.location" value="${platform.home}${file.separator}rt${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-jre" unless="jfxrt.jar.location">
        <condition property="do.set.jfxrt.in.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${java.home}${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${java.home}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-jre-old" depends="-set-jfxrt-in-platform-home-rt-new,-check-jfxrt-in-jre" if="do.set.jfxrt.in.jre.old">
        <property name="jfxrt.jar.location" value="${java.home}${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-jre-new" depends="-set-jfxrt-in-jre-old,-check-jfxrt-in-jre" if="do.set.jfxrt.in.jre.new">
        <property name="jfxrt.jar.location" value="${java.home}${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-check-jfxrt-in-envjdk-jre" unless="jfxrt.jar.location">
        <property environment="env"/>
        <condition property="do.set.jfxrt.in.envjdk.jre.old">
            <and>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
            </and>
        </condition>
        <condition property="do.set.jfxrt.in.envjdk.jre.new">
            <and>
                <not><isset property="do.set.jfxrt.in.envjdk.jre.old"/></not>
                <not><isset property="jfxrt.jar.location"/></not>
                <available file="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
            </and>
        </condition>
    </target>
    <target name="-set-jfxrt-in-envjdk-jre-old" depends="-set-jfxrt-in-jre-new,-check-jfxrt-in-envjdk-jre" if="do.set.jfxrt.in.envjdk.jre.old">
        <property name="jfxrt.jar.location" value="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}jfxrt.jar"/>
    </target>
    <target name="-set-jfxrt-in-envjdk-jre-new" depends="-set-jfxrt-in-envjdk-jre-old,-check-jfxrt-in-envjdk-jre" if="do.set.jfxrt.in.envjdk.jre.new">
        <property name="jfxrt.jar.location" value="${env.JAVA_HOME}${file.separator}jre${file.separator}lib${file.separator}ext${file.separator}jfxrt.jar"/>
    </target>
    <target name="-pre-check-jfx-runtime" depends="-set-jfxrt-in-envjdk-jre-new">
        <echo message="jfxrt.jar.location = ${jfxrt.jar.location}" level="verbose"/>
    </target>

    <target name="-check-jfx-runtime" depends="-check-jdk-version, -pre-check-jfx-runtime">
        <condition property="jfx-runtime-available">
            <and>
                <or>
                    <isset property="do.set.jfxrt.in.fxrt.old"/>
                    <isset property="do.set.jfxrt.in.fxrt.new"/>
                    <isset property="do.set.jfxrt.in.fxsdk.jre.old"/>
                    <isset property="do.set.jfxrt.in.fxsdk.jre.new"/>
                    <isset property="do.set.jfxrt.in.fxsdk.rt.old"/>
                    <isset property="do.set.jfxrt.in.fxsdk.rt.new"/>
                    <isset property="do.set.jfxrt.in.platform.home.jre.old"/>
                    <isset property="do.set.jfxrt.in.platform.home.jre.new"/>
                    <isset property="do.set.jfxrt.in.platform.home.rt.old"/>
                    <isset property="do.set.jfxrt.in.platform.home.rt.new"/>
                    <isset property="do.set.jfxrt.in.jre.old"/>
                    <isset property="do.set.jfxrt.in.jre.new"/>
                    <isset property="do.set.jfxrt.in.envjdk.jre.old"/>
                    <isset property="do.set.jfxrt.in.envjdk.jre.new"/>
                </or>
                <isset property="jfxrt.jar.location"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}JavaFX runtime JAR not found." unless="jfx-runtime-available"/>
        <echo message="jfx-runtime-available = ${jfx-runtime-available}" level="verbose"/>
    </target>


    <!-- Check availability of WebStart executable -->

    <target name="-check-webstart-in-fxrt" depends="-check-property-javafx.runtime" if="javafx.runtime.defined">
        <condition property="do.set.webstart.in.fxrt">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="javafx.runtime.defined"/>
                <or>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${javafx.runtime}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-fxrt" depends="-check-webstart-in-fxrt" if="do.set.webstart.in.fxrt">
        <property name="active.webstart.executable" value="${javafx.runtime}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-fxsdk-jre" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.webstart.in.fxsdk.jre">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="javafx.sdk.defined"/>
                <or>
                    <available file="${javafx.sdk}${file.separator}jre${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${javafx.sdk}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-fxsdk-jre" depends="-set-webstart-in-fxrt,-check-webstart-in-fxsdk-jre" if="do.set.webstart.in.fxsdk.jre">
        <property name="active.webstart.executable" value="${javafx.sdk}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-fxsdk" depends="-check-property-javafx.sdk" if="javafx.sdk.defined">
        <condition property="do.set.webstart.in.fxsdk">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="javafx.sdk.defined"/>
                <or>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${javafx.sdk}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-fxsdk" depends="-set-webstart-in-fxsdk-jre,-check-webstart-in-fxsdk" if="do.set.webstart.in.fxsdk">
        <property name="active.webstart.executable" value="${javafx.sdk}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-platform-home-jre" if="platform.home">
        <condition property="do.set.webstart.in.platform.home.jre">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${platform.home}${file.separator}jre${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${platform.home}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-platform-home-jre" depends="-set-webstart-in-fxsdk,-check-webstart-in-platform-home-jre" if="do.set.webstart.in.platform.home.jre">
        <property name="active.webstart.executable" value="${platform.home}${file.separator}jre${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-platform-home" if="platform.home">
        <condition property="do.set.webstart.in.platform.home">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${platform.home}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${platform.home}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-platform-home" depends="-set-webstart-in-platform-home-jre,-check-webstart-in-platform-home" if="do.set.webstart.in.platform.home">
        <property name="active.webstart.executable" value="${platform.home}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-jre" unless="active.webstart.executable">
        <condition property="do.set.webstart.in.jre">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${java.home}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-jre" depends="-set-webstart-in-platform-home,-check-webstart-in-jre" if="do.set.webstart.in.jre">
        <property name="active.webstart.executable" value="${java.home}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-probjdk" unless="active.webstart.executable">
        <condition property="do.set.webstart.in.probjdk">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${java.home}${file.separator}..${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-probjdk" depends="-set-webstart-in-jre,-check-webstart-in-probjdk" if="do.set.webstart.in.probjdk">
        <property name="active.webstart.executable" value="${java.home}${file.separator}..${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-check-webstart-in-envjdk" unless="active.webstart.executable">
        <property environment="env"/>
        <condition property="do.set.webstart.in.envjdk">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <or>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}javaws.exe"/>
                    <available file="${env.JAVA_HOME}${file.separator}bin${file.separator}javaws"/>
                </or>
            </and>
        </condition>
    </target>
    <target name="-set-webstart-in-envjdk" depends="-set-webstart-in-probjdk,-check-webstart-in-envjdk" if="do.set.webstart.in.envjdk">
        <property name="active.webstart.executable" value="${env.JAVA_HOME}${file.separator}bin${file.separator}javaws"/>
    </target>
    <target name="-pre-check-webstart-in-unix" depends="-check-operating-system,-set-webstart-in-envjdk" unless="active.webstart.executable">
        <condition property="running.on.unix-active.webstart.executable">
            <and>
                <not><isset property="active.webstart.executable"/></not>
                <isset property="running.on.unix"/>
            </and>
        </condition>
    </target>
    <target name="-check-webstart-in-unix" depends="-pre-check-webstart-in-unix" if="running.on.unix-active.webstart.executable">
        <local name="exec.which.javaws.result"/>
        <exec executable="command" failifexecutionfailsK‹˚/k™¡¨º·∞Í~ëπ;R`,‰!≠n•€XVôÕπf◊∞Øäuu¨i∫≥KÌæÃı«î›zgûg∑⁄µ+≠tœW∞√,˘]‡Ï†=¿ur	ˆ?Çp›ô⁄!Ã9*≤ﬁ4äπ>ÚeÇÄVÎÔÁ8åiá1è‹õ_◊0ÇFŸ8ÇòZ1}lóóm~áòÅcQûôEw§P–£f p©Ÿ,≠jgÏÅïå6£F5üx]dü6Ûöﬁœ`6í?	í‡aKx|Ì∆i,_!Øb<^£∫ΩŒG√T∂7yø≈Ò∑πÚÍÚØ»©w©Éø°Œ˝ñG˙wxø'ªˇÄgGÏ«üòƒ?+®W∞áhWXdW‹ısm´‚Æ0Èàóà#^"é∏âê÷N≈ò1é;6ûçm¥QHà!ÔùUÃ≥Ö•|¯+˙€˚ÚLåÂ\Mπú∆DSv«˙∫èπ	oñÑ◊:	øí	of“¬m˛Ê„Qˇ—È{·ﬂj“3´íÙDLiKÔâw˜3d?fêÕ¬Ë9™ng<]¨ª¯»ÈÚªX˛ù≥ˇ¡ßË?1ˇ‚’ˆoJƒ¯|è0û@;Q_©iÿ†U¡–¸∏J`óƒmZwh5
ß≈D`—ß›bªΩƒÌ∆µ*q≠§ä#SIT,SŒX¬ôÚ·3*?◊¡R‚!ﬁ'¡öˇPK
   5HÇG¿RﬂW
    +   com/mysql/jdbc/ConnectionGroupManager.class≠X˘{TÂ~ÔÏôπ	÷Å$ìE¡àò0îM∞≠\f.…‡d&ŒL0hÎÇj•≈≠E[km5.Xt ÇK[≈k≠]‘ßO˚¯ãDÈ{æ{s3[$E˘ÊªÁ;ﬂ9ÔŸÔù˜ˇ˚ÍÎ Œ√A,ƒÆ*,¿ÌAúÖ;dπ”èªÇ‚nyÿ-g˜»roÁ„æ ~ƒ,‹Ô«û ™±Kx~¬è±WñÇd|0Ñápè‡'≤¸TdÌìÂQayLv?ìÂÁ≤<.À/dyBñ_äÄ'e˜+?~-¬w˘ÒTO™Å f„Yû n?û¢ª‰·yë˝∞<ÓóÂY~¿ãÚ˚í»;‡«A±ÄÚ˘Ò≤Ü™W≠^øÊ⁄Œek4åèn7vÕ}πD≤˘
#€›iÙ.&«⁄DW »ıeL+ 9Z-R“Hu5ØÕe©Æ≈—X∫ßπggˆ˙dÛˆ¯÷Xs[:ï2cπD:µ"ìÓÎ]ºÑRΩ=[M#•aa)Ûˆû˛Êh⁄à_jPdÃ,π€i§å.3CcªçÏUfW"õ33fº£ß_É∂YÉØ5ëJ‰ñhp◊’o–‡iK«â{L4ë2WıQgfù±5IJm43íåLBûm¢'◊ù»jò{
ÜALÌ2s%áÌ©lNÄk∏†Æ‹5ıßÚ˝›%õUFèBY&ÅÆSfûZV(c{H˘'∏º?fˆ y÷èW(ΩΩÜq$™m∂”»≈∫©RCCEKÜS°-ùLZB®SÀäøá◊ö9°¶5L*ˆ˘Œﬁ!øüWÃﬁ:öäé”®ƒ˘çx¸ät6ß°ÆÇ‡r f….WåŒq%Œ—0°@s;˝m‰“íûn%2¥-ùYﬁœ@(oN…sû>|	Â2“vòbD[∫/Eµ+π®ù5b(N≥J˝^∆.≤g8≤£ÈÆ#8‡Îu0Sc÷πF•3)k∫wf+äë‘[óŒ…º‚Af‘Ù°≥ë0hR≈4¢ä)CÎ2F*k3fO⁄Ú[¿®í@r†∆∫6ﬁ‚PD
˛úë≥µ∏∏«€S9”Í3Z≤∏¶¨ŒÏ n’.ìri_"W◊‹Yì›0BZUˆ¬b-ï∫{9@πx&ÕÓ«%9JL®´ho†5ñ¥;vpm∫/3/OHKòVπÁŒ:.¡Rãp°é<Î8ÇAf»◊óâ\zU«Q”q1ñËXåVQ,’ Ø·0ÛØx∏±"tºé7¸xS«oÒ;øekp•oÈx«˝xG«ªxO«˚¯@«’8°„Cº°„¯Háâ?ÍH»Ú'°%eóí%-K/6…r¢L-ΩŒÈVÍ*?˛<ƒYËz¡«:>¡G&èê:˛äOu¸óÂ≤¸ì)’®„3‹¨„s‹ÃYu:SX√ÏQ "sVo›NˆEíõkØå:ÉâΩ2ñNÂåD*ª“‹Y“Y¨´ãÎ9Ê›Ã∂í™:-'ç–†XºÓﬁ>äπ∞ÇòQ
ˆô◊˜I¶∑oáëÏ3πôR7‚d¨.Í∂“á„ÒeIñv∏ÆÚe)ôX=ïŒY=	{÷p™È-òAµÂTé;æ=≠2˚sÍ=âZ<)ıP\§éïì*∏O¿1C;´7aılöÔ…&n4ï‘vµ≤+◊»kF2ù5„6OuQã!Âª’€DQ{}≈H§rÑã^ªŒ‹©‹7Æ»bÎ5√gÙˆö):¨iTw∏UûQ◊ˆu«Mß»¥R˛@.më4ËC/TÚJ«W˘¸÷ ‹JÉÜã¯‰BüŸë∏J{‚o-œÿÁ∏.„S3Ÿ©‡m8ÌÄ∫r)Wü"ŒB§ã)\ÜÂ¸≠«ÂXa_Ó°:ó–¬’êá{j¨ùÁMx_:
Ô&JıEÖ…√ø1Úí£`çD’ÑâD1Áb.?ô⁄‘ôä+–ŒﬂÈ°+©≤J⁄*œDuãEk"∞ûQïG–s1B+–±Ä∆,Ñü˛®Ê≠qÙF'©Ú¨¢ƒ’é1(YdÜ
L(Ò«íÑlxAi‹6®˜¯ÎÊÔÚÜ„–jCyË˚0ı(™7FM4B¡yåƒXËä!Ú∞∫Œ∆„E1N1®häÚ9ƒ	Ó™©~"Ép6Cp’7¿"˙f1Ω”F´\-õà1∏
kÃÂ<oWû€¥E®¡:ﬁpaΩÌkãœ,ÆNˆl§Ê´±…ˆ–3ƒ„„ÔºÜ#®]’4àÒZ<aœ &hÿá∞Ï&j†%-ﬁ∞7rFìN˛ÁÄcG-±ÅÚΩƒ1ãö®©Mπ’«g?6ïóVŒƒ5¯é‚ùg£ó›wπ”‘Ó{º·"g=e]KŸÎÌ†Xî-§T¡¿Vı1≈K-CÙùç
Ω°∞üŸ‰@˜D¬û<&[a8˘Ø» ¶hÿÔXae’fà≤ö8Îàlqà%¨éXƒ&–*±ƒ≠l¥,	0c*’Ãv¡?Î,Óúm!≠ä„~õm…”î)∫Áª[+Ÿ0≠¿ÜiwäacwÎ¿…OªÛÖÙ1Jé”„&si´Ø€A6⁄B_√û2Ñ~æçﬁ≈*Ì"7{+"ËuábaNú>Ê©#aNRrµ§à1MÃ◊Àò∑;s¬ŒòAµ”¶3Råºæ ycA∆®˝¥°Ï˘∏±${¶™
Í£¸åÚÃñ~⁄∞ì∂‹TêASújvÏÈ∞ÌÒ≤¶≈
…íãqsi8É¨≥-ŒY\Yñ,äÜËü_µ¥rO-¨·aogKé•—∏Öío•ˇn√lÏ¢áÔp–œf[ï<∆éÜß,=—póECÍ7ıM0üYÛnjøáZÓ%∆˚à„˛os˙õ`û^Û^jÄZ$∆áà„ëos/Î»^óÿ√‹ﬂq¡å·wÅ†"?JÉ+œ~ß5˚Ì÷\8V˘bã˝ˇá∆Ã
C„q˘ìÌÙ	ç'OkhdN94
Ògë≥BÈÚ)7_ŸÕ‡,6É≥KõA≤†®^ ∂X¶˙¬>õÈ2Ÿ)ÆY-˛∆∞Á∏¯0ª%º›ssZ‰1◊≥E=í-Dù[ö…ëÅì{è¢û V’Üÿv—0àF™Q˙îöKdg´Ò5	ö¶çMaü˙[ó«ºçMçÇÑ Ûh&≠^hµÁ∂xNæ÷î«y√/õk‡)˙ËizxÄçÈY6§ÁË°ÁÈÌ˝Ù⁄lı/≤ù`38Ñ€Ò2Ó¢‘=8Ã§=ÇWÓ^Â˜ÌQ~…√ß¸˛Çüæ_úƒJΩÜâºéî:_≈Àœ◊◊ï*ö>j[«Fy≠jä◊8M1c7≈Wòr√«‹∏\—§dærÂóN£¸úÕ∆y˙Ÿn›ƒw5n$üGe¬LR,]7ÒûusãsÛ˚™ç˛ 7€Â˝ü%ß;4ÊƒJ;$—⁄PgCqZ‘ï§≈¸o§Qëäo¢”;N~)ÚyÎxãﬁ¶ˆ„ãwXÆÔ“7Ô—/Ô≥L? ﬂ	6˙ù:òO.±ŸKŒ…∂ó&3Á-/®° ÷Û√ôØ¬bΩ´†¨—!Ø(∑8ü©Z¬v‚ÇÎ(ŒÁÓÇC®rΩm◊®)5õÁ2Dı§ﬁ™Z»mˇPK
   5HÇGÜö®OM  Ã  %   com/mysql/jdbc/ConnectionImpl$1.classÖS]OA=”ØeóUöA¥biÅMLLëHMöT©·}ª`qªSw∑¶˝Y>®—„≥ˇD˝∆;C-•ÌCwnœ‹{ŒΩgf~˛˝ˆ¿ûË–»¿Ú÷'«öÜÇA`Q√ÜÜMÜTtÍÜπmÜÂ™#öV≥æ˜¨≥F›±ÑÔs'rÖ_i∂º•Ó∫æÌ1<Õè…≠ûŸl´πûUâx`G"(≠1$DÉ3LU]üøn7Î<xk◊=B2U·ÿﬁë∏ÚL»÷¿`Và>8Ï0‰Ñ¨éñœÌP≥±Õ4sS#Ÿ´j›÷≈ÌÚwØãï;˜C“*ÌóQÓ8º%•C[⁄± ∂s ∞4‡“E•2É´¥Ö·Y≥˘Ûé<€?±ﬁ‘œhHUõÑÙö{‚€Q;†Iû]g=áÔ{¬y7n§öhÈJK¶Øzª%uÈÀæ„â–ıO^ÒËT44X&∂±cBáabè6áR’=ÊN◊Òx≈ßÆ§}"`ò÷îâ,“sËã#f&/ïer≥vXÌüù”H^Ü§úîúàÁ•Ûs˘õ/7VËUM–´cÈ¥4Å¢8˝&a"Ü[“™êBÒXa„bU“m˙¶Ëí#˘Sg)Q¶1®h≥Ñe)6eûBÊôß8A»Z…¢û–>!í¡(˛@¸+R'¶tπì¸=˘Áíñ—◊2pKTﬂgNø Ê{=ÊÁ¥ |Ω@‘…œH]†˜Iujw˘2)}WTÂ*Ó´ırjÔ!÷êQm–CRµ¯PK
   5HÇGÛw˘ W  È  &   com/mysql/jdbc/ConnectionImpl$10.classÖS[OA˛¶≠,mWiÄÑ¢•\∂xKLëõí4©Ç¡ƒ∑ÈvÄ≈ÌL››˙≥|P£∆gîÒÃÄE.mvÊÏ7Á|ﬂπÃ¸˛Û„'ÄM<I¬¬ÉFQ∞∞íFE´)◊,¨[ÿ`âéº0_bòØª™Â¥∫·Gﬂ9n6\ß¢§n‰)Ykµ˝2πny“ã∂ûÜ¯÷è˘'Ót"œwjëx§ÇÚ >C¢¢öÇa¨ÓIÒ∫”jà‡-o¯Ñå◊ïÀ˝}x˙ˇLË‘¿`◊à>®¯<!ãÉÂÛõ% 6vBEM^ó	CÓ¢\∑˝O≤tçˇ÷eµÍI$dHbÂm‚JUO\—÷⁄°á¡:PAïªGsW⁄ti∫!å€L/Ül·4#üÀCÁM„ò™4±„WaÜ‰ûw(y‘	®ígóYOÀ/}Â~V“ûÍÆÿÒtK&.6wCÎ“´“ıUË…√W":RM%õ.‹CI§l§ÒàaΩÔîÍﬁÅpªÆ/jí≤“ÌSÅÃ0›/33òeX6zÜŸïSGM„Ù·ﬁnΩ7;ö÷@b∫JQ¿e»RQâH4‚=é©Bø+OÁÔ±@/nî^$Àdt»ä”óÜçníµKªAä´_¿äkﬂ˚lún—:B Ÿ%åëù#Gò¡`¨Id	Àëmk?ÉL2MvÇê€¥S„ŒÑ*ÑÜ’_àGÇ·ùä°î> Êë .˜ªÉ9"ËQg^ı›3ÍÁ¥kˇdë∏o|≈»9Ò’
í=“$Â;ˇ?)≠&ÚÕæÑº9[∆}åõ4ÈëôX¸PK
   5HÇGå'Ç≥˘  P  &   com/mysql/jdbc/ConnectionImpl$11.classÖS›k”Pˇ›ı#[ö∫Œ-›úŒ’⁄i◊ä±‡õ‚K©Pàänˆò¶ó5%πwﬁ&:ˇÒüÍ@Aﬂ˝£ƒsØA»»MÓπøèìsN~˛˙˙@∑`·™çyl⁄∏ÇÜÖkö6J∏n°eaÀ¬Ür:âf≠;õ~(/y5{{”Ò(Ù˙R¶ë√‰0æG–˚ëà“Õˆ9ÿÌ=Üb_é9√¢	˛8KF\Ì£ò"}Ò^†"ΩœÉEùú!I©~Ãfú"Õ≥≠ZΩeVPô†µ≠}©≠˙”‡E‡iŒŒSpÚCM §Ω#3Úáë6]>≠u[ì(„Åc9ãƒ¡#ûN‰ÿ¬Mml;∞Qq‡†Ó†É:É˚_Üuèq‡=ÀD%¸Ô°¶wÁ}CÌü»ì—î©pßt≈ü¬mú)≈P
FR•¶gÜû•QÏÖRÑôR\§ﬁ‡àáY*ïÈY’Äá"ÂJD^ÀI∆sw¢‰KmJP4h∂Ê©[`µö.ç‹›™Ω@owiØ#vß˚¨sÇπcÉY§µL∏ØQ3¶QX¬
tˇ]‘sÖ £‡v>Å}A·#™˛7îˆª'(ˇ864ãà≈\¥Nì˜,˜=l˜-*Ó;¨∏åIù0JvkÜÁÊv\2I≠„2=ãÙõl`Ÿ§√H€\øPK
   5HÇG¶a  "  &   com/mysql/jdbc/ConnectionImpl$12.classÖS[OA˛Ü÷.îE eT§U{Vö`x!ò4)mC‚„v;°€‹‡/Úô$ëÍ£? xfh0ÑMvŒÃôÔ|Áõ3g~˝˛z`Ø˚ê∆C5<R√„4˙QL#èReîT<I£sÊÿû2dˆø–Ò|ﬂπ+E+d`UÜ~Ì˛~Ù´íaºÊ é≠óˆv´È⁄kzgcâ!µΩ∞@D”ˇbV§‹ç<)™ù]_Aﬂx¬ãññä∑`´ˇÀW⁄dHÆ»g¨yÇØ«ù&N”'œpM∫éøÈûZwùI•èfïr+æÜú<≥7k(,,í‰Dã*/#∂±⁄∂≥Áÿ*¶˛Æ∂z‡Ú]@»t]∆ÅÀﬂz*È»UÆyDäWÖÎÀ–[k<jÀñÅãxfb√&p◊ƒ 2&F0e‚9^x…`]õë!ß˝æ#∂Ï˜±àºø‹TØfn; ›˛_íçÊ6mRØäã*N›H≈0ÚhùG˚2ÿiêQæxQ¨8Ú|õZÀçÉÄã»^=‡n…`©™™ö°»∫twxtò,ÍùÏı=@›ÿ%÷Ì@Ó+ë‘òÅÍy∫j$2UPÄ,’T[™2Ωì˙G0J(ãfÀ¥Ní-Wé¡ ì«Ë)œ#Q>AÚP£≥4¶Îc47’ú‚«q™≠&1’Âäê–ÏÖÚQ°ÁÓêI\LSü1P;EÔá 	˙Œ5K0∫9rî÷7Ù[g»Z?0aù#g}Gﬁ˙©Ûf	óCÓcZ«∫
tj•Ûf…&Èπ™5%Ù˜PK
   5HÇG=Dßm    %   com/mysql/jdbc/ConnectionImpl$2.classÖS]S”P=∑≠	)J˘D@´ñÚ@E∞»8vÍLg*É√oizÅ`ö[ì‘°≈·:˙‡¯Ïèr‹{[Àg·!ŸÕπª{vœÊ˛˘˚ÛÄlËA6	s:rΩàc^":ìdótX:ñ¥Ë»3‰LóQ≥jÕìgW+éUæœù»~©V˜Ú∫È˙n¥≈∞ñΩ%∂|l∂≠F‰zV)‚Åâ ?∑«ê(à*g(ª>ﬂn‘*<¯`W<B“e·ÿﬁû∏Úª&dk`0KT>(xvrBfo¶œ¨R≥±öi¯∫FF/≤5ÎˇóØâﬂºLV<â∏W~ãj%ã'ØKÍP«
É~ Ç¢Ì1L]QÈ,Sâ¡UÿD˜(Üël´#œˆ≠˜ïcRÂ¶Ø¬∆Æ{Ë€Q#†I6.Wmç√ﬂx¬˘x€Hª¢8¸≠+%∫®Ìí‰•}«°Îæ„—ë®ÍX5ÒœL$—k¬ƒsÜ≈ÆK*ª‹i:/˘‘ïîO2}Õƒ¨3åwkœƒ$Ó—ØzÀ˙&oòûTU‚…√›ùrg¥±Î“†Ûö1ƒ≥r	cŸnˇ9ùÔ3ÙÖë®∑päÅÌcÜÆûA˜ì•RR)Ú‚ÙòËC˝‰ÌêïHon˛,∑±Ø*hÄﬁ›hÎHë?JÅÜA Qÿò*«⁄»8!w…O2Añ‘kmìï“ÛøˇÅ√Ù‰ß∏#˘bäØ_∂¢m¿‘^bP€<«õÓ¶1Ö˚TΩ√ízM,”mñWm#G4⁄7Ëg≈Øctä‘˙Ã˘¢ÙûUôPŸ©≥«xÇ!Úí’£rÒPK
   5HÇG∫uX20  …  %   com/mysql/jdbc/ConnectionImpl$3.classçT[OA˛ÜﬁÿvÅ ’KAƒR.‚ï^J—bA•ÄMt€N`…v∑Ón	¸	|3>˙‡/&*—√ã1Òo¯?åg¶jÇ4¿>Ïú9s.ﬂ˘Œô˘ÒÎÀW cXP¡•0T\“!]ç†◊B∏Æ àâ0˝í‚7¬T”!‹`à∫‹1tsÖ;Æa[Àô6«–ê≤-◊”-oE7+<∞±˜¶ÒÂ∑üØÇﬁ∫·ˆç2úÕÏíV⁄v_ò⁄F1_–»√‚è¢dJe3I¶ìÜex”ΩÒ#l3+˛î]‰MY√‚ïRû;Kzﬁ$Ms÷.Bùp“˛è“/p0ÄAÕP,'eÍÆÀI”sxÆæqBV∑E∞√	áóÏMû6ã‹ı“ñÁlápã! EÜìÒÏÜæ©kœ0µyΩ‹'ı…ÅU2°¯È-Üé™Ö»ñ{òMoxY§I ÑÊ@Â9ÓlrÁÅ√À∫√ã9O˜xâ[û†ãKm5ì2‘W¡f»ÑÇˆ˝¥lóˇRì¨Â?YUö∫µ¶›œo!…Éöi ¢‰å5K˜*EöÆYˇ1C	ñ¬9ª‚¯¨!pµÏÔƒà°~ß≠ÇiªÜµ6œΩuª¬m)Ã®hFãäV§UÃ¢K≈YúSqw˙è«©ä*ÊpOE4ÿm5[E£|ƒƒ0ƒ˛≥êÑdóSzaùá0O≈’ ä°Û–»‚‹·Ñˆ tó∆«ó7#./H§§o•MyNGıkºz9Z„@Ü+„©©.˜Rƒ≤ê˝ÒU- X'ÁÜ}¿ÈΩà–√‘·4–H˜´IÓ¢—®hàîA]i£ìvín–ﬁGk$1¯,€E›{i‘Aˇ AYƒIí€•cß§‘â.“˘Eci¡æ”†u<Ò>ˇ[|;â¡]¯ßbØ—=¯Ü=Ü}ˆ}B˝'(Ôò«v(UC–&<"˘•†iFΩ≤Ñ∞ÚQÂ1ZïUt)O–´<E\yÜ!%Myé1ÖKêó(˝≠ΩË#`]TÔyÙÀ˙∆ˇ« D/'Y AêI´äRÂŸI√íÇÚ‘§4*£˙që,Œê‘L∫™_7n¢'®¸PK
   5HÇGVjzÇ‘  ¿  %   com/mysql/jdbc/ConnectionImpl$4.classÖTkS”@=[
ÅC-¢¢ºƒ¥UZ¥*Z±÷ôéUúÒ[ö,mò4©I`‡è8√å:˛ùQ||£¸Qéw”⁄·Y⁄I≤π{ŒπÁﬁ›Õüø?òC°}H êëíqó{qE∆,“24dƒmÆWqMBV¬u	7zÇöÂOg.î∑ûÆo˘oÏÙöY1“y◊q∏XÆS¨7ÏAÔXé,0Lj«`+—ºkrÜÅíÂÂızÖ{/ÙäMëx…5t{E˜,Òﬁ
FÖ0(EíÚÚ∂Ó˚ú"ùSMg…XT¯b»v∞ï+≠Èzz=∞ÏÙSœmp/∞∏ﬂ4jä·l2’N†U´ 0|∏É\ÿ4xC¿}	7$ì˚ÅÁn1ti"M‹rÓ	H»Hk â§Âg•ˆLÆÉôƒÜnä6FéD»ewù<<¥Dœ˜∂rVêh¡
éaªæÂTÛ†ÊöÊ‹¬∏'®bt§…ÃK∏£‡.,‚ûÇ%‰$‹Wê«⁄O«¨C,tiÎN5˝§≤FsS˚HmÔ≈ˇÕs=Ü°CÀcÎòía‘∏|∏îy›®Ò‚Í2Á&7˙´< µr@ ÜSZ´À°ªr‡Q;r{7c‘Q?–Ω¿e52¶d%^H7Ó”1À–A[8ˆÙòVóLΩA={ë¨æ|^¢-€GI-gC∑-3,hè≥f∑iÛcú>2∫~∞XL,0}E¢t©†håFYDË»…‘W∞‰7D>”['ÈﬁC®Ôß±"∆§5àaàc<Ç”Ñ
ãtuâÿ~‚€ê8ﬁúl≈hgB1*Áà1öbÙ=£]E¯¶±Tà8Dv{ó÷ˆ3Å…—!¥H©•v–ıì‚èÓ†{√…/`ﬂ—#;ê~†7ˆ©≠Ø
û˙ÉÍÃ®wŸ◊⁄ˆ5La:Ã≠ÖÖà\CÖ\
—ê¿Pÿ+F›ˇ PK
   5HÇGYp o    %   com/mysql/jdbc/ConnectionImpl$5.classÖS€R”P]ß≠§)⁄rD@´ñ®†»82u¶3á¡·Å∑4=@0Õ©IÍ–_Ò/|@Gü˝%Ø˚ú÷r)ÖádÔ¨≥˜Z˚íÛ„œ◊o ñ∞™#él:f5‰zE^"sÊd4òz¬C'»ê3U≤E’¨6ÇwÆyT)€Ê¶<náéä’öªF°ÎéÁÑ+ŸkbKG÷{À¨áékCÓ[°◊fwbõ¢¬Jé«∑Í’2˜ﬂXeóêtIÿñªk˘é¸nÅ1Yå"—˚õÆúêô´Â3ÀTl‰òz∫¨ÜëÛjç⁄≈≈K‚◊/äéCÓ§µ∂A\â¬±ÕkR:–∞ƒ†Ìø`ŸáìS:ÕT√‡*lº{√p∂YëkyÊÎÚ5©r”ù0Éæ„xVX˜©ì’ã¨Õv¯WÿoØkiG‘}õøt‰HœœvAÍ“ûÌä¿Ò^ÒPT4<4è$–k¿¿2√|◊%ïú}n7ló=™JéO¯2}≈¿<eÎVûÅ	‹¢_ıöı3L\—=MUOÓló⁄˚£ç]…À˜ÖÎñ-IÕ 5åfª˝Ètæ«–Ñ¢÷ƒiTl”t˘t∫°,ôî≥"/JèÅ>D–Oﬁ6YâÙÊÚ'`ππœà|TAÙÓ°ªÄ‘O$…°@
C
CÄÚÜ6™ËX#‰&˘1B∆…“¸ZB[d%C:ˇ—/à1|@<;¡©Qz˝≤î‘/©ﬂH•˛û—M∑u”òƒmbo´$üì TKÂYKEœëLœ'hß‰ùÕËmRùJü>KJÔïywïÕ‡û:ªè$/AQqïãPK
   5HÇGãªèû  Ç  %   com/mysql/jdbc/ConnectionImpl$6.classÖT]S”@="°%@PDD´ñë"_bÅqdÍLù™£8<ñÜÇi∂&)≈·åËËÉ„≥? ÒnZ

›ª={Ô=˜ûΩõøˇ~˝0áµòíÀtIÃhòÌÜ
K"9sI≤O5ÃkX`Ë9¥ΩLhÚ™p˝àa†t`⁄V¯Ÿ≥6O—<Cg¥ÔÜô√x…´r,v éµ!|ü;ë+¸b•ÍI◊U◊w£uÜ◊Ÿ|ÎTµ»ı¨bƒ;A˛*˙…-uCÏpÜæíÎÛ∑µJôÌ≤GàQéÌmŸÅ+ˇ7@UñÀ ΩHî¡Ügá!'d‚˙í2K‘ÄrîkÍ–ZC∫ïÌ∏z òª¬ı"Y·(‚~H\˘u ï,9º*©Cã⁄Æ
∂≥œ0vIπ≥»Xªç¥˜bÃ÷+ÚlœzW>†&„X„2Ãêÿt˜|;™‘… ≈¨ıv¯KO8ünjiS‘áør•$˝≠⁄ŒJ^∫¡ÇÔx"t˝Ω7<⁄;ñt,„ôéÙÍËÜÆ£+3mo™‰ÓrÁÿÒx—ß“§Ü"ê9ûÎ»cïa∏]ç:Óaúf¯Ü`ΩFíˆlFﬂóöóH◊vm^ÜÆ@x^Ÿñ)Ü≤Ì˝Ù§uÚŒü\àŸ¶GF¢Z˜%]ÿ6Ó”#O“Á@I•§¶ Yòê˙ı!∑i∑EV%õ2ßN¿Ãô(ÊÙt|ç=Z;È¡òG?Ì”‰Mæ¿ÔÜqá∞⁄Î“/FF	πK{ïê1≤$zÉÌYô!=ı™˘ O‹R]¶zÇN…©ƒúΩ≤Jc)cÉ∆Ú9Ótì;M=NCì)ıÇò4ò÷L	ì®¥ÔË:K~π°D3iÇ x>)≠ô8Ú«ˆ	≤ÒŸ$LäâLœ'é≈PK
   5HÇGEáÏÅõ  <  %   com/mysql/jdbc/ConnectionImpl$7.classÖS›R”P˛NàÑñ 5@A≠Z¬O¡?ƒ"Év Lg™é‚p¡]%òÊ‘$e‡U|gDG/Ø}u|«=áZ˛·"g7{v˜€˝ˆÏèø_øò≈B	L»c2â$¶LwBGNZfÃ&Iﬁ5pœ¿}k€Ò3N#Q´yÒ≤ÔTÿC{ºÈEôÜ—≤+jπ⁄nÙŒœm≠W‹\AwcO•Z›œìÎÇxÒ"√\ˆﬂÚñ≥Ì‰±ÁÁJ1ùXÑ˘µÒUΩ ÷9COŸ¯ãF≠¬√7N≈'ãUÆ„Ø:°'ˇõF]÷∆ ≥D˘√ÇÔD'Àÿ˘¯ô9™V€°¶˙N´Ñ!}m∑˛qÊˇÖ„`≈ùòaÂ)W≤∏„Ú∫Ñé<`06DXt‹MÜë4D*2∏r:€ã°?ª_ëÔ’‹À 5©b≠ìfÜƒäWú∏R'Û«≥Ó∑√ü˘¬}{QK+¢∫|ŸìîÙÂvZ‚“ãÅÎã»™œyº)÷<41áG&∫–m¢¶âÃ3Lù9©≤∑¡›]◊Á•ÄJìäPÊxl"ìa¨M\√(=ÿﬁ √9µäAyπÚ™‹"çÌ‹º]èü∂6â∆òUO{ {⁄[Ss&á5ã˙˛—ÜÎ¥ûIZd-ïít$â;≤¥—◊É4\&mï§N2eOÏÅŸ#{–Ï…œh˚†<-:€iA`˝D/ÈiÚ&_Ùa P⁄ ÆêmàtS˙)À0YÆíÆìeÑ$ÒŸD{MRfHO|ánÑˆó4ºGá≠Ô°]bj
≥[Vi˝B ˙ç~Îœ!Ït;M=éB)µDH7öHOöH	õ†åOË8H~≤°D+iÇ øy8)ùy∑ïºÉ¨∫áM— íi3T,˛PK
   5HÇG_Y≤Ûù  z  %   com/mysql/jdbc/ConnectionImpl$8.classÖT]S”@="°mÄJ° ààV-·#‡'P`;uÏL’—:<ñÜ•”lMR˛äˇ¬——«gî„›PJ°∫w{ˆﬁ{Ó=w7ˇ˝˙`	Î1ƒ0+óπ8‚ò◊∞êÄ
S"ãñ‚dkx¢·)C‚¿r3∂ZÆ®2ïˆ≠Àt-ØjñCﬂÒ™9Üﬁpœ	2ãS%[‘Ã⁄QŸ5˜w*∂ôû«Ì–^±Vw•Îö„9·√ÎÏ5æ'Dç–qÕb»}+~Æì|fãAÕãŒ0Xr<˛∂Q´pˇ£Uqπ,Vÿñªe˘é¸ﬂUY,Ù"˙y◊
N»Ù’eñ©|Âê∫ÓVC˙<€Q˝îq±ãˇ⁄E≤¬a»ΩÄ∏rî+^8¥y]Rû1hª¬/Xˆ√dángëë<rø‹ãa$€&‰ª >5≈u¬±≤Sı¨∞·S'+≥û¥√_∫¬˛t]Ke—m˛ ëí§Œkª yiÇœvE@s}√√=±£·πéX÷—è	Ë:±¬0È§JŒ.∑èló=*Mj(|ôcUGkcó’®„¶Ë_s&ÆêÄ§çîáÂ˜•÷ilWÊ%uÊOŸπ˘¥]Ù—l∑õ'O∫Fl3Ù°®üxƒ¿∂qówú>J2)»íºÑÙ–oI(∏Iª-≤*Ÿ§1{fÃC1Ê~†Ák‰9Dk/Ω!§Vê¢}öº…√¢›n6N{]˙E»!∑iØ2Iñ$o≤} +3§gˇ@5æA˘â
æ†œPè—+9ïàs@VôZE2ï√HjΩç;›‚NSè”ƒ–bJn”Ω&”zì)fïˆ}g…;äµí∆®¸˚ÌIiÕDë0≤èêçŒf`P4Hdz<Q,˛PK
   5HÇGƒ≈~˙S  „  %   com/mysql/jdbc/ConnectionImpl$9.classÖS]oA=»X-·´µµ∂UT
m?ìÜ⁄òLHVMÉ©âoÀ2Ö≈ew?À5˙`|ˆGÔLë⁄RË√Œ‹=sÔ9˜cÊ˜ü?<ƒ”<àc[	ÑQTPä∏≠`G¡.C4ËX~æÃ∞ÆõnOÎç¸è∂÷m5M≠Í:7ÀuÍΩæ]!◊}À±ÇÜgÖ+|ıÆÒ…–ÅekıÄ{F‡zï≠cÜH’mqÜE›r¯ÎAØ…Ω∑F”&$•ª¶aû%˛«`D§∆ µNÙ^’6|ü≤9_>øG…ÜÜTSÊ≤DrÁ’F˝äÂK¸˜/ä’Üw|“™Wº64y_H˚
4ÂƒıjÜŸaXõÍ“Y§lón+≥Ω≤Ö”ål√ikoö]*R∆¶¶aÜX√j;F0®íΩã¨ßÂC€5?\UR√x&iâñ§œ˜vWË“kéiªæÂ¥_Ò†„∂îU∫oèTƒWë¿cÜùôC“≠néLõ◊ J¥œıD¯ÜÂYô©X¡*›“+&œ∞:ßpj®Ïõ8lÈì——∞ÊÚ2$œp|C"áº=†êpALb©0Î≤”˘{l–[[†∑»íI—≤¬Ù%†"ÑÎd—.ëbÈXq˚Bü•”Z£tıëMcëÏ9ä¿$“Ä¥2»ñ#[~Y"dôÏ!7ißûçÖ™ÑHÜ“/Ñø#¬NÖ§P\e3àg≥3ƒnaç&‘…D}{L˝úv·+˜µØàûOWõê∆(ﬂıˇIi›êëõ∏#˜ª»À≥{∏èîLìﬁóå≈_PK
   5HÇG˚BO"∏  À  4   com/mysql/jdbc/ConnectionImpl$CompoundCacheKey.classïî[OQ«ˇßªtÀv°Hπ®à¢ÇÙﬁ•–Lö¢ò@HÙm€ÆtõÌnŸn5|øüÄc"%BÇ˙‚5ü˝$∆9€ÅõtfŒ\Œ˘Õú”~¸πª`s2∫ÎDq.í2DƒBHq=¡≈§S<<-·
_\ïpçA)⁄’ömÈñªhÈΩÌ±¶ööµ™.πéa≠¶Á,?±Be≠^Œ⁄%Jg9Ü‡¨anÜa<÷^‹ÓâØ0à≠Í»ÇaÈ˜’ÇÓ,k”;ﬁ.jÊäÊ|Ì;E∑l‘z≤ú¢aï≤Z±¨ÁıuÀYñÓdM≠^◊)cjÅ@’Íz}ÕT+•BQÕ⁄/∫ÜmÂ™5sÙ¯‘öT”úVÁûÂı‘◊öI˚ınh±P°≠“Òáî™Y∂[÷ÜÓGÜSwÔSÂ<Ø°ÅPX∞ï£ìÙk)ã”ƒ‰%ª·ı;Ô.zríW)à‚∫ÇnDÙ ¬0x|å∑ÜY‚Pp7‹¬åÑ¥Ç„¢W¬,√‰ˇÕC¡Yú£A˜∏È⁄ÇZ≠¶[%Üâø‹tºÕÂ3R€!◊nπ˙bÌâÈ#g˛Œ˛'<FË)w—ÛËKÉˇÙ¯ö˙˜#QÙÅ.í¨ß¥ÊûôƒX"πç@"µ!±Ò¡:/xô´MtÙõê»H5j¢sÚs™`Ä‰ :Hæ§ü’.:±GÁÔ”º¬ yGZß‡$Ü<ñú!*ÊY√d»¶1˚Tœh-íŒ'ﬂ ºÅ˘‰kÑÔ
éÒ—îß$q¢êŸDÑªπØ	%3ºÅ~NòÚ(ï?mKÿ:¿ºÄ…˜êÅû…'¬¸Lá~¡æ“ø∆7‰›CNÇÇ9B¢ n§qûjy˘É6Ú∏àQÇf¸Ö˘™∑Ü7<˘œ±Aœ˘√€Zi%¯€p…ì„8MZ¶Xóq
°_PK
   5HÇGt9\  l	  =   com/mysql/jdbc/ConnectionImpl$ExceptionInterceptorChain.classùVMoE~&v≤±Ω§éì:‘MiiSj{;≈ÖP‘M©€%˝p |H{ïl‰Ïö›JÆEH ¡ÅC+@BâïZÅ9†û87z@¸	 ;„Õ⁄±ù4 À3≥Ôºœ<ÛÃÏ˛˘œoø8çB8Äó√à¢¬^ƒlØ‚5n~=Çs(ÚÊ|s∏¿õ7$\å Ço.ÒÊ≤U¬õ≤a∫∫]—ÎÆe;QuU˚HÀ≠ªF-ßé[`ïçeSs◊mù!”1=£V¨µ‹⁄¶Ûa-∑Z]™‰Ê6\›tÀ,ÃRËÄªb8SG;˝äñiÍóKkıwù1L√ùe8ì|ÇoBM3óse◊6ÃÂBjÅ!X¥™Äjò˙¸˙⁄ínﬂ–ñjdâ©VE´-h∂¡ü=cêc84∑¡WŒ3∑X(ÆhÜIƒî®™]¨ié£ìÎŸΩQMÏöâ÷k„ÿOÎ^CÿO„Hògàh’ÍuöZ‘mã!ŸEMØ™ÇéH[IÜì˚äkÍ;0\N6ëÚ‡Ú5’ü)ÏŒH!µK1oPÜ—6!ï»¢5ÙSƒ‹√ÿÓÒ™¬pxè‚Òù{æYﬂﬁ˜©eü†a©™;Æmm2íBh\ß{À¥–VÂ™m’u€5tGÏK∏Ó?sò=˝»´l≠”6\08ÊëùJÀÚó1ÜºÑ+2Æbö·xÀ/{N´ˆ⁄b	◊d\GY∆0bn»∏âo·m	Ô»Xƒª2ﬁ√˚'ˆ°I§d<èºå3xÅa˙û∫uZG· “*≈0Ï) Ü#{!qÇâ€ëøõD2√PÕ‚Ãx˚Kn∑ˇ˚6vü€ñ}ù”ÓªvhßÖ4G 	%YR;)r4<süTÔ3Î∂í™W4g^ﬂpÖ™I’¶x›N“^«Ëµ]*Ë£◊Iá∆#4Í√h4 ïH„~˙è·i≤¢—†>ëVÄ•A_ZQÓ#êâ”ø¢ˇÓâ¯µC¬ÛB¯òb?¡azäãJ	å„( F«,Ÿé”8H’OP?Åì^µÛîÅ˚ÀÈ˚(H¥Úá≈‹ßÑ˛≥∂‹≤ü[∆s8E9[πW6µ<˜∑î;H}ûÁ˛ìºk`êa~≤Å√]$hfxààBì¨9 uÎÒ#Âg
qAœmH¯úË˚Çl_“[¸+'MÈáiyi(Çàº,è&	eë#ÿS.Û¸Oì?„ÁœÉzãzæ¥LÍ)™™xPGïm®<≈∞ı¯Ô{Ô∆ªîˇk≤}CàæÛ)&«»Òd<å-<	Åá—èÆo[Óx‘eõxR›‘≈[‘e
¢ø:}Oà~†
?ímã¯¯©çµqüµ¨œZVp≈ƒËELÔ`m‹c≠µ’}xIÂ,ûR°/˙†:¸PK
   5HÇG—∏MVŸÆ  ¯| #   com/mysql/jdbc/ConnectionImpl.classÏΩw|≈0<[ÓvvveYíõ\œ∆ÿ≤lÀc¿¶Xñe[∂:…∆6 Nw+ÈÏ”ù|≈ñ	5	$$$Ñ$îB Sö[H®	%$@Ä–C/ÅÔÛÃÏÓÌY6…˜˚˛x_˚ßπÈ;ÛÃ3Oõvˇ~u!dÅiÍ§⁄?:†ÛÕˇ #™ˇ!<Ã¿yù?2r•ˇQt˛ÑŒcöˇqF¶˘ˇÃàÈù'—yä˘ˇ‚ˇ+ı?Õ»8ˇ3Ãˇ¨ˇoåL?ß˘üß˛4ˇﬂ1˛EÍIÛøÃ¸Ø¯_’¸Øi˛◊Òˇ¿ÔΩ°˘ﬂ‘¸oÈíœˇ6f}á˙ﬂ≈¿{ÃˇæˇF¶˙?d˛˙?“¸côaôOò‘‡ˇ7F™˘?3¸ˇÒ—a •öm‘d¶\¶)ß¢„C«Øi”®¶3r∏ˇ	åaËË @¥tF†S
YDÒëËî°SéN:£–çŒt∆¢3ùJt∆£3ùâËLBg2:S–	¯N˝\¸√–Tt¶°s:”—9ùËÃDß
ùYËT£3ù9ËÃEßùyËÃGg:—9ùEËäŒbtCÁpté†⁄¸]äŒëËÖŒ—Ë√¥eZ-’ñc†ùË‘k⁄J™≠“…;˛∑5m5#ß 5†≥Üjkô÷®51≠YkÅa“Z©v,˛∂1-®µcû¶≠”÷£sS~¨m0¥ç⁄&téGty
„N@ÁD™u^i
’N¬ﬂÓ¬ASuUßbµt,¶uk=ò‹ãè¢≥∂02FSò”˙05éq	t˙—ŸäNR”R¯õ÷¥˛n£⁄v™Pmêj'SÌKT;Öj_¶⁄W®v*’N◊NáI†ùÅ8S”Œ¬äø »nˇÄ~⁄◊4ÌÎå‹™ù1⁄9L˙óˆ¨ıõT;∞T˚ñ¶}[”Œc‰w⁄w4Ìª¯{>fˇñ=G”.`‰>Ì|M˚>˙:?ƒ˙/DÁ"^åŒ%¸:?∆‡O–˜SÙ]jê'µüi⁄eÛst.GÁ
Lªùöv#œL p5’Æ1¥kµÎ∞e◊⁄/¥_¢s#Ôh7¢Ô&¨ÓfÃz˙v⁄.m∑°Ì—ˆ¢Û+Mª’ oiø÷¥ﬂ`ë€0p;N¨;tpÓƒ"wÅ„ˇújwSÌ∑X„Ô®v˛ﬁ´iøg‰SˇSTª√˜c;Óg⁄⁄sb´brvÊa&˘4§C⁄—yhÇˆ'Lªôjè1ÌqÌœT{ÇjORj˚’˛Jµß©ˆ’û’!ÒoË<áŸûG‘yÅi◊^DÁ%™Ωå—ØPÌU™ΩFµ◊©ˆ¸¿8joRÌ-ºçŒ;ËºKµ˜∞Ü˜©ˆÜ?§⁄?©ˆ∂Èëˆ/t>°⁄ø©ˆ)·3ˇùœ¡°æIë$Q}
˙TJ}î˙)’(˛”°9äîöîñP:Ç“RJGRZF)RZ°—Q@Ò¥€†ât4:c∞Ó±ËåCßùÒù¿§cÈDLBg2:Hvh¿†S®tf8ùÈCFﬂtf¢É¥ÜŒ“h5¢Ân&ùDg£3ëZÅ!•s5Z√§n:O£Ûô‘…t$É≥?u•ã`¶–C1∞€yıÒñNÈî.AÔRJè§Ù(Jè∆–1î.ÉÆ—Zr/(–:JWPZOÈJJWQ∫ö“J◊P∫ñ“Fç6Q⁄hF[ )i+÷p,•m¯§¥ù“J◊Q∫^ß«—ÎçXÂ&L?û˙ÊRz•'R⁄â'°¢¥ã“0•J-Jª)Ì°¥ó“(&n¶t£1⁄áNú—Ìgt+MRö¬@ù£€Ëvå@Ëb‹…<ô“/iÙJøå ˘
•ßRz•ßSz÷}&:g°ÛUˇØ-£_◊ËŸL∫xÆ÷Hœ°Ù˛eãˇÁ?Ê·¡ﬂDÁ\tæÖŒ∑—9ùÔ†Û]tŒG‡tëÆP§+ÙáË\à“ätÖ^ÇŒè|‚ ´å˛ò˛D£?•ÙRFF/£ÙÁ8ˆóÙ
m∑FØ‘Ëç^≈§ÅúÄ‘ÓEz5:◊0ÈÔÙZJØ£ÙzJÅµ˛í“(ΩË:Ω	√7SzãFwüßª0ºõ“=îÓ¢J•—[1Í◊Ë¸õ~£∑”;∞'w¢s:wkÙ∑î˛é“{†m⁄Ô0ÔΩË¸´ºO£˜2•hÙî>HÈC}ò“G4ä$Ñ>™Q$ ˛'4˙ì+Ë„¯ë?c à‘O¢3ù*å{ä“øË⁄2˙WFü¶œ0˙,˝F?áŒÛÿî–˜wt^§Ù%J_FÔ+}ï“◊–ã"E“Bﬂ@L|ò}ã“∑±™wpÃﬂ•Ù=L~S>†ÙCJˇâ·èÄãR$.Ö˙	:ˇ÷ËßL^Jëº–ˇ RéN®.Q]¶:Rv]≈(”˝∫ÜA
‘U◊—aËËòËî ©ª}:•ËåDßãïSΩÇÍ£®>öÍc®é‚ç>Œ ÛÙJdœ2fèŒMü»‰„uîpt$5˙tLü™£L£Ñ¡ÈËLı¯;§2˙,ÙU£3ù9Ë†D£◊†o’Á„Ô™#a—Ag’ë∞Ëã—9åÈáÎGP}	’óR˝H™£ £#I—è°˙2¸≠EgπB»ÁHâı:tV0Ω^_IıUTföﬁÄëk®æ—iB84SΩÖÍ≠TGFoC∞1æùÍ≥ùıËáŒt6R}’èß˙	T?#:©~í°áÙ.™á©~ß[ﬂç5ı†Øù(’7c⁄™«0‹áÌBëEGëEÔWP`‘Ù≠L˛•ûDx£‹¢ß©û
Æo3ÙÌ˙ ’áÙì©˛%™üBı/S˝+T?ïÍßQ˝t™üAı3©~’øJıØQ˝ÎT?õÍÁP˝Tˇ&’œ•˙∑®˛mrget name="-copy-binary-css-bypass" depends="-init-css-conversion" if="do.bypass.binary.css">
        <echo message="Warning: Bypassing FX CSS to BSS conversion due to a bug in &lt;fx:csstobin&gt; task in current JDK platform" level="warning"/>
    </target>
    <target name="-copy-binary-css-impl" depends="-init-css-conversion" if="do.copy.binary.css">
        <property name="cssfileslist" refid="cssfiles"/>
        <echo message="css files to binary convert: " level="verbose">${cssfileslist}</echo>
        <fx:csstobin outdir="${basedir}${file.separator}${build.classes.dir}">
            <fileset refid="cssfiles"/>
        </fx:csstobin>
    </target>


    <!-- Copy dependent libraries -->
    
    <!-- Note: target "-jfx-copylibs" is referenced from NB 7.1 build-impl.xml -->
    <target name="-jfx-copylibs" depends="init,compile,-pre-pre-jar,-pre-jar,-jfx-copylibs-warning" unless="fallback.no.javascript">
        <jfx-copylibs-js-impl/>
    </target>
    <target name="-jfx-copylibs-warning" if="fallback.no.javascript">
        <echo message="Warning: Dependent Libraries copy (-jfx-copylibs) skipped in fallback build mode due to JDK missing JavaScript support."/>
    </target>
    <macrodef name="jfx-copylibs-js-impl">
        <sequential>
            <local name="run.classpath.without.build.classes.and.dist.dir"/>
            <pathconvert property="run.classpath.without.build.classes.and.dist.dir">
                <path path="${run.classpath}"/>
                <map from="${basedir}${file.separator}${build.classes.dir}" to=""/>
                <map from="${basedir}${file.separator}${dist.jar}" to=""/>
                <scriptmapper language="javascript">
                    self.addMappedName(
                        (source.indexOf("jfxrt.jar") >= 0) ||
                        (source.indexOf("deploy.jar") >= 0) ||
                        (source.indexOf("javaws.jar") >= 0) ||
                        (source.indexOf("plugin.jar") >= 0)
                        ? "" : source
                    );
                </scriptmapper>
            </pathconvert>
            <!-- add possibly missing dependencies at distance 2 (build system logic thus provides transitive closure) -->
            <local name="run.and.lib.classpath"/>
            <echo message="JavaScript: -jfx-copylibs" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    var pathConvert = project.createTask("pathconvert");
                    pathConvert.setProperty("run.and.lib.classpath");
                    var classPath = new String(project.getProperty("run.classpath.without.build.classes.and.dist.dir"));
                    var fileSeparator = new String(project.getProperty("file.separator"));
                    if(defined(classPath)) {
                        var classPathCopy = pathConvert.createPath();
                        classPathCopy.setPath(classPath);
                        var pathArray;
                        if(classPath.indexOf(";") != -1) {
                            pathArray = classPath.split(";");
                        } else {
                            pathArray = classPath.split(":");
                        }
                        var added = new java.lang.StringBuilder();
                        for (var i = 0; i < pathArray.length; i++) {
                            var index = pathArray[i].lastIndexOf(fileSeparator);
                            if (index >= 0) {
                                var onePath = prefix(pathArray[i], index+1).concat("lib");
                                var oneDir = new java.io.File(onePath);
                                if(oneDir.exists()) {
                                    var fs = project.createDataType( "fileset" );
                                    fs.setDir( oneDir );
                                    fs.setIncludes("*.jar");
                                    var ds = fs.getDirectoryScanner(project);
                                    var srcFiles = ds.getIncludedFiles();
                                    for (var j = 0; j < srcFiles.length; j++) {
                                        if(classPath.indexOf( srcFiles[j] ) == -1 && added.indexOf( srcFiles[j] ) == -1) {
                                            var path = pathConvert.createPath();
                                            path.setPath( onePath.concat(fileSeparator).concat(srcFiles[j]) );
                                            added.append( srcFiles[j] );
                                        }
                                    }
                                }
                            }
                        }
                    }
                    pathConvert.perform();
                ]]>
            </script>
            <echo message="run.and.lib.classpath = ${run.and.lib.classpath}" level="verbose"/>
            <delete dir="${dist.dir}${file.separator}lib" includeEmptyDirs="true" quiet="true"/>
            <copy todir="${dist.dir}${file.separator}lib" flatten="true" preservelastmodified="true" overwrite="true">
                <path>
                    <pathelement path="${run.and.lib.classpath}"/>
                </path>
            </copy>
        </sequential>
    </macrodef>
    
    <target name="-copy-external-preloader-jar" depends="-check-project" if="app-with-external-preloader-jar">
        <copy file="${javafx.preloader.jar.path}" todir="${dist.dir}${file.separator}lib"/>
    </target>


    <!-- Optional classpath re-base of dependent JAR manifests after copy to lib/, required by GlassFish -->

    <!-- Note: target "-rebase-libs" is referenced from NB 7.1 build-impl.xml -->
    <target name="-rebase-libs" depends="-check-project, -jfx-copylibs, -check-rebase-libs, -rebase-libs-warning" if="do-rebase-lib-jars">
        <rebase-libs-js-impl/>
    </target>
    <target name="-check-rebase-libs">
        <condition property="do-rebase-lib-jars">
            <and>
                <isset property="rebase-lib-jars"/>
                <not><isset property="fallback.no.javascript"/></not>
            </and>
        </condition>
        <condition property="do-skip-rebase-libs">
            <and>
                <isset property="rebase-lib-jars"/>
                <isset property="fallback.no.javascript"/>
            </and>
        </condition>
    </target>
    <target name="-rebase-libs-warning" depends="-check-rebase-libs" if="do-skip-rebase-libs">
        <echo message="Warning: Dependent Libraries JARs rebase (-rebase-libs) skipped in fallback build mode due to JDK missing JavaScript support."/>
    </target>

    <macrodef name="rebase-libs-js-impl">
        <sequential>
            <property name="pp_rebase_dir" value="${basedir}${file.separator}${dist.dir}${file.separator}lib"/>
            <property name="pp_rebase_fs" value="*.jar"/>
            <echo message="JavaScript: -rebase-libs-js-impl" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    var dir = new String(project.getProperty("pp_rebase_dir"));
                    var fDir = new java.io.File(dir);
                    if( fDir.exists() ) {
                        var callTask = project.createTask("antcall");
                        callTask.setTarget("-rebase-libs-macro-call");
                        var param = callTask.createParam();
                        param.setName("jar.file.to.rebase");
                        var includes = new String(project.getProperty("pp_rebase_fs"));
                        var fs = project.createDataType("fileset");
                        fs.setDir( fDir );
                        fs.setIncludes(includes);
                        var ds = fs.getDirectoryScanner(project);
                        var srcFiles = ds.getIncludedFiles();
                        for (var i = 0; i < srcFiles.length; i++) {
                            param.setValue(dir.concat("${file.separator}").concat(srcFiles[i]));
                            callTask.perform();
                        }
                    }
                ]]>
            </script>
        </sequential>
    </macrodef>

    <macrodef name="rebase-lib">
        <attribute name="jarfile"/>
        <sequential>
            <local name="tmpdir"/>
            <property name="tmpdir" value="${java.io.tmpdir}${file.separator}${user.name}_${ant.project.name}_rebase" />
            <echo message="tmpdir = ${tmpdir}" level="verbose"/>
            <delete dir="${tmpdir}" quiet="true"/>
            <mkdir dir="${tmpdir}"/>
            <unzip src="@{jarfile}" dest="${tmpdir}">
                <patternset>
                    <include name="META-INF${file.separator}MANIFEST.MF"/>
                </patternset>
            </unzip>
            <local name="manifest.file.temp"/>
            <property name="manifest.file.temp" value="${tmpdir}${file.separator}META-INF${file.separator}MANIFEST.MF" />
            <echo message="manifest.file.temp = ${manifest.file.temp}" level="verbose"/>
            <!-- edited manifest file -->
            <local name="manifest.file.temp.new"/>
            <property name="manifest.file.temp.new" value="${manifest.file.temp}_new" />
            <echo message="manifest.file.temp.new = ${manifest.file.temp.new}" level="verbose"/>
            <echo message="JavaScript: rebase-lib" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    var UTF_8 = "UTF-8";
                    var ATTR_CLASS_PATH = "Class-Path";
                    var ATTR_CLASS_PATH_FX = "JavaFX-Class-Path";
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function isSigned(manifest) {        
                        var sections = manifest.getSectionNames();
                        while(sections.hasMoreElements()) {
                            var sectionname = new String(sections.nextElement());
                            var section = manifest.getSection(sectionname);
                            if(section != null) {
                                var sectionKeys = section.getAttributeKeys();
                                while (sectionKeys.hasMoreElements()) {
                                    var element = new String(sectionKeys.nextElement());
                                    if (endsWith(element, "-Digest") || endsWith(element, "-digest")) {
                                        return true;
                                    }
                                }
                            }
                        }
                        return false;
                    }
                    var src = new String(project.getProperty("manifest.file.temp"));
                    var srf = new java.io.File(src);
                    var manifest;
                    try {
                        var fis = new java.io.FileInputStream(srf);
                        try {
                            var isr = new java.io.InputStreamReader(fis, UTF_8);
                            try {
                                manifest = new org.apache.tools.ant.taskdefs.Manifest(isr);
                            } finally {
                                isr.close();
                            }
                        } finally {
                            fis.close();
                        }
                    } catch(e) {
                        manifest = null;
                    }
                    if(manifest != null) {
                        if(isSigned(manifest)) {
                            print("Warning: Signed JAR can not be rebased.");
                        } else {
                            var mainSection = manifest.getMainSection();
                            var classPath = mainSection.getAttributeValue(ATTR_CLASS_PATH);
                            var classPathAttr = null;
                            if (classPath != null) {
                                classPathAttr = ATTR_CLASS_PATH;
                            } else {
                                classPath = mainSection.getAttributeValue(ATTR_CLASS_PATH_FX);
                                if(classPath != null) {
                                    classPathAttr = ATTR_CLASS_PATH_FX;
                                }
                            }
                            if(classPath != null) {
                                var result = new java.lang.StringBuilder();
                                var changed = false;
                                var pathArray = classPath.split(" ");
                                for (var i = 0; i < pathArray.length; i++) {
                                    if (result.length() > 0) {
                                        result.append(' ');
                                    }
                                    var index = pathArray[i].lastIndexOf('/');
                                    if (index >= 0 && index < pathArray[i].length - 1) {
                                        pathArray[i] = pathArray[i].substring(index+1);
                                        changed = true;
                                    }
                                    result.append(pathArray[i]);
                                }
                                mainSection.removeAttribute(classPathAttr);
                                mainSection.addAttributeAndCheck(new org.apache.tools.ant.taskdefs.Manifest.Attribute(classPathAttr, result.toString()));
                                var tgt = new String(project.getProperty("manifest.file.temp.new"));
                                var tgf = new java.io.File(tgt);
                                try {
                                    var fos = new java.io.FileOutputStream(tgf);
                                    try {
                                        var osw = new java.io.OutputStreamWriter(fos, UTF_8);
                                        try {
                                            var manifestOut = new java.io.PrintWriter(osw);
                                            manifest.write(manifestOut);
                                            manifestOut.close();
                                        } finally {
                                            osw.close();
                                        }
                                    } finally {
                                        fos.close();
                                    }
                                } catch(e) {
                                    print("Warning: problem storing rebased manifest file.");
                                }
                            }
                        }
                    }
                ]]>
            </script>
            <antcall target="-move-new-manifest-if-exists">
                <param name="move.file.from" value="${manifest.file.temp.new}"/>
                <param name="move.file.to" value="${manifest.file.temp}"/>
            </antcall>
            <zip destfile="@{jarfile}" basedir="${tmpdir}" update="true"/>
            <delete dir="${tmpdir}" quiet="true"/>
        </sequential>
    </macrodef>
    
    <target name="-new-temp-mainfest-existence">
        <condition property="new-temp-manifest-exists">
            <available file="${move.file.from}"/>
        </condition>
        <echo message="new-temp-manifest-exists = ${new-temp-manifest-exists}" level="verbose"/>
    </target>
    
    <target name="-move-new-manifest-if-exists" depends="-new-temp-mainfest-existence" if="new-temp-manifest-exists">
        <move file="${move.file.from}" tofile="${move.file.to}" failonerror="false"/>
    </target>
    
    <target name="-rebase-libs-macro-call">
        <echo message="Rebase jarfile = ${jar.file.to.rebase}" level="verbose"/>
        <rebase-lib jarfile="${jar.file.to.rebase}"/>
    </target>
    

    <!-- Main Deployment Target -->

    <!-- Note: target "jfx-deployment" is referenced from NB 7.1+ build-impl.xml -->
    <target name="jfx-deployment" depends="-check-jfx-deployment-launch,-do-jfx-deployment-script,-do-jfx-deployment-noscript" if="jfx-deployment-available"/>

    <target name="-check-dist-lib-exists">
        <deploy-defines/>
        <available file="${jfx.deployment.dir}${file.separator}lib" type="dir" property="dist.lib.exists"/>
    </target>
    <target name="-check-jfx-deployment-jar-current-nolib" depends="-check-dist-lib-exists" unless="dist.lib.exists">
        <uptodate property="jfx-deployment-jar-current" targetfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" >
            <srcfiles dir="${basedir}${file.separator}${build.classes.dir}" includes="**${file.separator}*"/>
            <srcfiles dir="${basedir}${file.separator}nbproject" includes="**${file.separator}*"/>
        </uptodate>
    </target>
    <target name="-check-jfx-deployment-jar-current-lib" depends="-check-dist-lib-exists" if="dist.lib.exists">
        <uptodate property="jfx-deployment-jar-current" targetfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" >
            <srcfiles dir="${basedir}${file.separator}${build.classes.dir}" includes="**${file.separator}*"/>
            <srcfiles dir="${jfx.deployment.dir}${file.separator}lib" includes="**${file.separator}*"/>
            <srcfiles dir="${basedir}${file.separator}nbproject" includes="**${file.separator}*"/>
        </uptodate>
    </target>
    <target name="-check-jfx-deployment-launch" depends="-check-jfx-deployment,-check-jfx-deployment-jar-current-nolib,-check-jfx-deployment-jar-current-lib">
        <condition property="do-jfx-deployment-script">
            <and>
                <isset property="jfx-deployment-available"/>
                <not><isset property="fallback.no.javascript"/></not>
                <not><isset property="jfx-deployment-jar-current"/></not>
            </and>
        </condition>
        <condition property="do-jfx-deployment-noscript">
            <and>
                <isset property="jfx-deployment-available"/>
                <isset property="fallback.no.javascript"/>
                <not><isset property="jfx-deployment-jar-current"/></not>
            </and>
        </condition>
    </target>
    <target name="-do-jfx-deployment-script" depends="-check-jfx-deployment-launch" if="do-jfx-deployment-script">
        <antcall target="jfx-deployment-script"/>
    </target>
    <target name="-do-jfx-deployment-noscript" depends="-check-jfx-deployment-launch" if="do-jfx-deployment-noscript">
        <antcall target="jfx-deployment-noscript"/>
    </target>

    <target name="jfx-deployment-script" depends="-check-jfx-deployment,-check-project,
        -swing-api-warning,-icon-warning,
        -set-dimensions,-reset-dimensions,-set-update-mode-background,-set-update-mode-eager,
        -set-permissions-elevated,-reset-permissions-elevated,
        -copy-external-preloader-jar,-copy-binary-css,
        -deploy-app-sign-nopreloader-notemplate,
        -deploy-app-sign-preloader-notemplate,
        -deploy-app-sign-nopreloader-template,
        -deploy-app-sign-preloader-template,
        -deploy-app-sign-nopreloader-notemplate-swing,
        -deploy-app-sign-nopreloader-template-swing,
        -deploy-app-sign-blob-nopreloader-notemplate,
        -deploy-app-sign-blob-preloader-notemplate,
        -deploy-app-sign-blob-nopreloader-template,
        -deploy-app-sign-blob-preloader-template,
        -deploy-app-sign-blob-nopreloader-notemplate-swing,
        -deploy-app-sign-blob-nopreloader-template-swing,
        -deploy-app-nosign-nopreloader-notemplate,
        -deploy-app-nosign-preloader-notemplate,
        -deploy-app-nosign-nopreloader-template,
        -deploy-app-nosign-preloader-template,
        -deploy-app-nosign-nopreloader-notemplate-swing,
        -deploy-app-nosign-nopreloader-template-swing"
        if="jfx-deployment-available">
    </target>

    <target name="jfx-deployment-noscript" depends="-check-jfx-deployment,-check-project,
        -swing-api-warning,-icon-warning,
        -set-dimensions,-reset-dimensions,-set-update-mode-background,-set-update-mode-eager,
        -set-permissions-elevated,-reset-permissions-elevated,
        -copy-external-preloader-jar,-copy-binary-css,
        -fallback-deploy-app-sign-nopreloader-notemplate,
        -fallback-deploy-app-sign-preloader-notemplate,
        -fallback-deploy-app-sign-nopreloader-template,
        -fallback-deploy-app-sign-preloader-template,
        -fallback-deploy-app-sign-nopreloader-notemplate-swing,
        -fallback-deploy-app-sign-nopreloader-template-swing,
        -fallback-deploy-app-sign-blob-nopreloader-notemplate,
        -fallback-deploy-app-sign-blob-preloader-notemplate,
        -fallback-deploy-app-sign-blob-nopreloader-template,
        -fallback-deploy-app-sign-blob-preloader-template,
        -fallback-deploy-app-sign-blob-nopreloader-notemplate-swing,
        -fallback-deploy-app-sign-blob-nopreloader-template-swing,
        -fallback-deploy-app-nosign-nopreloader-notemplate,
        -fallback-deploy-app-nosign-preloader-notemplate,
        -fallback-deploy-app-nosign-nopreloader-template,
        -fallback-deploy-app-nosign-preloader-template,
        -fallback-deploy-app-nosign-nopreloader-notemplate-swing,
        -fallback-deploy-app-nosign-nopreloader-template-swing"
        if="jfx-deployment-available">
    </target>


    <!-- Security / Signing -->
    
    <target name="-unavailable-signjars-task" depends="-check-jfx-deployment" unless="jfx-deployment-available">
        <echo message="Warning: Task required to sign JAR file is missing, check the availability of JavaFX 2.0 deployment tasks. JAR files will not be signed."/>
    </target>

    <target name="-security-props-check">
        <condition property="javafx.signed.true">
            <istrue value="${javafx.signing.enabled}"/>
        </condition>
    </target>

    <target name="-check-signing-possible" depends="-security-props-check,-check-jfx-deployment,-unavailable-signjars-task">
        <condition property="javafx.signed.true+signjars.task.available">
            <and>
                <isset property="javafx.signed.true"/>
                <isset property="jfx-deployment-available"/>
            </and>
        </condition>
    </target>
    
    <target name="-javafx-init-keystore" depends="-check-signing-possible,-javafx-init-signing,-javafx-init-keystore1,-javafx-init-keystore2,-check-keystore-exists" 
            if="javafx.signed.true+signjars.task.available" unless="do.not.init.keystore">
        <property name="javafx.signjar.vendor" value="CN=${application.vendor}"/>
        <echo message="Going to create default keystore in ${javafx.signjar.keystore}"/>
        <genkey dname="${javafx.signjar.vendor}" alias="${javafx.signjar.alias}" keystore="${javafx.signjar.keystore}"
            storepass="${javafx.signjar.storepass}" keypass="${javafx.signjar.keypass}"/>
    </target>
    
    <target name="-check-keystore-exists" depends="-security-props-check">
        <available property="javafx.signjar.keystore.exists" file="${javafx.signjar.keystore}"/>
        <condition property="do.not.init.keystore">
            <or>
                <not><isset property="javafx.signed.true"/></not>
                <isset property="javafx.signjar.keystore.exists"/>
            </or>
        </condition>
    </target>

    <target name="-javafx-init-signing">
        <condition property="generated.key.signing">
            <equals arg1="${javafx.signing.type}" arg2="self" trim="true"/>
        </condition>
    </target>

    <target name="-javafx-init-keystore1" depends="-javafx-init-signing" if="generated.key.signing">
        <property name="javafx.signjar.keystore" value="${basedir}${file.separator}build${file.separator}nb-jfx.jks" />
        <property name="javafx.signjar.storepass" value="storepass"/>
        <property name="javafx.signjar.keypass" value="keypass"/>
        <property name="javafx.signjar.alias" value="nb-jfx"/>
    </target>

    <target name="-javafx-init-keystore2" depends="-javafx-init-signing" unless="generated.key.signing">
        <property name="javafx.signjar.keystore" value="${javafx.signing.keystore}" />
        <property name="javafx.signjar.storepass" value="${javafx.signing.keystore.password}"/>
        <property name="javafx.signjar.keypass" value="${javafx.signing.keyalias.password}"/>
        <property name="javafx.signjar.alias" value="${javafx.signing.keyalias}"/>
    </target>

    <target name="-check-signing-security" depends="-security-props-check">
        <condition property="is.signing.unsafe">
            <or>
                <not><isset property="javafx.signed.true"/></not>
                <not><equals arg1="${javafx.signing.type}" arg2="key" casesensitive="false" trim="true"/></not>
            </or>
        </condition>
    </target>

    <target name="-warn-insufficient-signing" depends="-check-signing-security" if="is.signing.unsafe">
        <echo message="Warning: Unsigned and self-signed WebStart Applications and Applets are deprecated from JDK7u21 onwards due to security reasons.${line.separator}         To ensure future correct functionality please sign WebStart Applications and Applets using trusted certificate."/>
    </target>

    
    <!-- Project Deployment Macros -->

    <macrodef name="deploy-defines">
        <sequential>
            <basename property="jfx.deployment.jar" file="${dist.jar}"/>
            <property name="jfx.deployment.dir" location="${dist.dir}"/>
        </sequential>
    </macrodef>

    <macrodef name="deploy-preprocess">
        <sequential>
            <delete includeEmptyDirs="true" quiet="true">
                <fileset dir="${jfx.deployment.dir}${file.separator}lib">
                    <exclude name="**${file.separator}*.jar"/>
                </fileset>
            </delete>
        </sequential>
    </macrodef>

    <!-- fx:jar scripted call enables passing of arbitrarily long list of params and fx-version dependent behavior -->
    <macrodef name="deploy-jar">
        <sequential>
            <antcall target="-pre-jfx-jar"/>
            <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
            <typedef name="fx_jar" classname="com.sun.javafx.tools.ant.FXJar" classpath="${javafx.ant.classpath}"/>
            <echo message="Launching &lt;fx:jar&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <property name="pp_jar_destfile" value="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}"/>
            <property name="pp_jar_buildclasses" value="${basedir}${file.separator}${build.classes.dir}"/>
            <property name="pp_jar_cssbss" value="**${file.separator}*.${css-exclude-ext}"/>
            <property name="pp_jar_dir" value="${jfx.deployment.dir}"/>
            <property name="pp_jar_fs1" value="lib${file.separator}${javafx.preloader.jar.filename}"/>
            <property name="pp_jar_fs2" value="lib${file.separator}*.jar"/>
            <echo message="deploy_jar: pp_jar_destfile = ${pp_jar_destfile}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_buildclasses = ${pp_jar_buildclasses}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_cssbss = ${pp_jar_cssbss}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_dir = ${pp_jar_dir}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_fs1 = ${pp_jar_fs1}" level="verbose"/>
            <echo message="deploy_jar: pp_jar_fs2 = ${pp_jar_fs2}" level="verbose"/>
            <echo message="JavaScript: deploy-jar" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function isTrue(prop) {
                        return prop != null &&
                           ( prop.toLowerCase() == "true" || prop.toLowerCase() == "yes" || prop.toLowerCase() == "on" );
                    }                    
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function replaceSuffix(s, os, ns) {
                        return prefix(s, s.indexOf(os)).concat(ns);
                    }
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    function contains(array, prop) {
                        for (var i = 0; i < array.length; i++) {
                            var s1 = new String(array[i]);
                            var s2 = new String(prop);
                            if( s1.toLowerCase() == s2.toLowerCase() ) {
                                return true;
                            }
                        }
                        return false;
                    }
                    var S = new String(java.io.File.separator);
                    var JFXPAR = "javafx.param";
                    var JFXMAN = "javafx.manifest.entry";
                    var JFXPARN = "name";
                    var JFXPARV = "value";
                    var JFXPARH = "hidden";
                    var JFXLAZY = "download.mode.lazy.jar";
                    var withpreloader = new String(project.getProperty("app-with-preloader"));
                    var fx_ant_api_1_1 = new String(project.getProperty("have-fx-ant-api-1.1"));
                    var fx_ant_api_1_2 = new String(project.getProperty("have-fx-ant-api-1.2"));
                    var fx_in_swing_app = new String(project.getProperty("fx-in-swing-app"));

                    // get jars with lazy download mode property set
                    function getLazyJars() {
                        var jars = new Array();
                        var keys = project.getProperties().keys();
                        while(keys.hasMoreElements()) {
                            var pn = new String(keys.nextElement());
                            if(startsWith(pn, JFXLAZY)) {
                                var fname = new String(pn.substring(JFXLAZY.length+1));
                                jars.push(fname);
                            }
                        }
                        return jars.length > 0 ? jars : null;
                    }
                    // set download mode of dependent libraries
                    function setDownloadMode(fsEager, fsLazy, jars) {
                        for(var i = 0; i < jars.length; i++) {
                            fsEager.setExcludes("lib" + S + jars[i]);
                            fsLazy.setIncludes("lib" + S + jars[i]);
                        }
                    }
                    
                    // fx:jar
                    var jar = project.createTask("fx_jar");
                    jar.setProject(project);
                    var destfile = new String(project.getProperty("pp_jar_destfile"));
                    jar.setDestfile(destfile);

                    // fx:application
                    var app = jar.createApplication();
                    app.setProject(project);
                    var title = new String(project.getProperty("application.title"));
                    var mainclass;
                    if(isTrue(fx_in_swing_app) && isTrue(fx_ant_api_1_2)) {
                        mainclass = new String(project.getProperty("main.class"));
                        app.setToolkit("swing");
                    } else {
                        mainclass = new String(project.getProperty("javafx.main.class"));
                    }
                    var fallback = new String(project.getProperty("javafx.fallback.class"));
                    app.setName(title);
                    app.setMainClass(mainclass);
                    app.setFallbackClass(fallback);
                    if(isTrue(withpreloader)) {
                        preloaderclass = new String(project.getProperty("javafx.preloader.class"));
                        app.setPreloaderClass(preloaderclass);
                    }
                    var appversion = new String(project.getProperty("javafx.application.implementation.version"));
                    if(defined(appversion)) {
                        app.setVersion(appversion);
                    } else {
                        app.setVersion("1.0");
                    }
                    // fx:param, fx:argument
                    var searchHides = project.getProperties().keys();
                    var hides = new Array();
                    while(searchHides.hasMoreElements()) {
                        // collect all hidden property names
                        var pns = new String(searchHides.nextElement());
                        if(startsWith(pns, JFXPAR) && endsWith(pns, JFXPARN)) {
                            var propns = new String(project.getProperty(pns));
                            var phs = replaceSuffix(pns, JFXPARN, JFXPARH);
                            var proph = new String(project.getProperty(phs));
                            if(isTrue(proph)) {
                                hides.push(propns);
                            }
                         }
                    }
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXPAR) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn) && !contains(hides, propn)) {
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    var par = app.createParam();
                                    par.setName(propn);
                                    par.setValue(propv);
                                } else {
                                    if(isTrue(fx_ant_api_1_1)) {
                                        var arg = app.createArgument();
                                        arg.addText(propn);
                                    } else {
                                        print("Warning: Unnamed parameters not supported by this version of JavaFX SDK deployment Ant tasks. Upgrade JavaFX to 2.0.2 or higher.");
                                    }
                                }
                            }
                        }
                    }
                    
                    // fx:resources
                    var res = jar.createResources();
                    res.setProject(project);
                    var pdir = new String(project.getProperty("pp_jar_dir"));
                    if(isTrue(withpreloader)) {
                        var f1 = res.createFileSet();
                        f1.setProject(project);
                        f1.setDir(new java.io.File(pdir));
                        var i1 = new String(project.getProperty("pp_jar_fs1"));
                        f1.setIncludes(i1);
                        f1.setRequiredFor("preloader");
                        var f2 = res.createFileSet();
                        f2.setProject(project);
                        f2.setDir(new java.io.File(pdir));
                        var i2b = new String(project.getProperty("pp_jar_fs2"));
                        var e2c = new String(project.getProperty("pp_jar_fs1"));
                        f2.setIncludes(i2b);
                        f2.setExcludes(e2c);
                        f2.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var f3 = res.createFileSet();
                            f3.setProject(project);
                            f3.setDir(new java.io.File(pdir));
                            f3.setRequiredFor("runtime");
                            setDownloadMode(f2,f3,lazyjars);
                        }
                    } else {
                        var fn = res.createFileSet();
                        fn.setProject(project);
                        fn.setDir(new java.io.File(pdir));
                        var ib = new String(project.getProperty("pp_jar_fs2"));
                        fn.setIncludes(ib);
                        fn.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var fn2 = res.createFileSet();
                            fn2.setProject(project);
                            fn2.setDir(new java.io.File(pdir));
                            fn2.setRequiredFor("runtime");
                            setDownloadMode(fn,fn2,lazyjars);
                        }
                    }
                    
                    // fileset to exclude *.css or *.bss
                    var fs = jar.createFileSet();
                    fs.setProject(project);
                    var buildcls = new String(project.getProperty("pp_jar_buildclasses"));
                    var exc = new String(project.getProperty("pp_jar_cssbss"));
                    fs.setDir(new java.io.File(buildcls));
                    fs.setExcludes(exc);
                    
                    // manifest
                    var man = jar.createManifest();
                    var a1val = new String(project.getProperty("application.vendor"));
                    var a1 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    a1.setName("Implementation-Vendor");
                    a1.setValue(a1val);
                    man.addConfiguredAttribute(a1);
                    var a2val = new String(project.getProperty("application.title"));
                    var a2 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    a2.setName("Implementation-Title");
                    a2.setValue(a2val);
                    man.addConfiguredAttribute(a2);
                    if(defined(appversion)) {
                        var a3 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                        a3.setName("Implementation-Version");
                        a3.setValue(appversion);
                        man.addConfiguredAttribute(a3);
                    }
                    var a4prop = new String(project.getProperty("javafx.deploy.disable.proxy"));
                    if(isTrue(a4prop)) {
                        var a4 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                        a4.setName("JavaFX-Feature-Proxy");
                        a4.setValue("None");
                        man.addConfiguredAttribute(a4);
                    }
                    // custom manifest entries
                    var searchManifestHides = project.getProperties().keys();
                    var manifestHides = new Array();
                    while(searchManifestHides.hasMoreElements()) {
                        // collect all hidden property names
                        var pns = new String(searchManifestHides.nextElement());
                        if(startsWith(pns, JFXMAN) && endsWith(pns, JFXPARN)) {
                            var propns = new String(project.getProperty(pns));
                            var phs = replaceSuffix(pns, JFXPARN, JFXPARH);
                            var proph = new String(project.getProperty(phs));
                            if(isTrue(proph)) {
                                manifestHides.push(propns);
                            }
                         }
                    }
                    var manifestKeys = project.getProperties().keys();
                    while(manifestKeys.hasMoreElements()) {
                        var pn = new String(manifestKeys.nextElement());
                        if(startsWith(pn, JFXMAN) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn) && !contains(manifestHides, propn)) {
                                var propnr = propn.replace(/\s/g, "-");
                                var entry = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                                entry.setName(propnr);
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    entry.setValue(propv);
                                } else {
                                    entry.setValue("");
                                }
                                man.addConfiguredAttribute(entry);
                            }
                        }
                    }
                    var profileAvailable = new String(project.getProperty("profile.available"));
                    if (defined(profileAvailable)) {
                        var profileAttribute = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                        profileAttribute.setName("Profile");
                        profileAttribute.setValue(new String(project.getProperty("javac.profile")));
                        man.addConfiguredAttribute(profileAttribute);
                    }
                    var perm_elev = new String(project.getProperty("permissions.elevated"));
                    var cust_perm = new String(project.getProperty("manifest.custom.permissions"));
                    var cust_cb = new String(project.getProperty("manifest.custom.codebase"));
                    var sa1 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    sa1.setName("Codebase");
                    if(!defined(cust_cb) || cust_cb == "*") {
                        sa1.setValue("*");
                        print("Warning: From JDK7u25 the Codebase manifest attribute should be used to restrict JAR repurposing.");
                        print("         Please set manifest.custom.codebase property to override the current default non-secure value '*'.");
                    } else {
                        sa1.setValue(cust_cb);
                    }
                    man.addConfiguredAttribute(sa1);
                    var sa2 = new org.apache.tools.ant.taskdefs.Manifest.Attribute();
                    sa2.setName("Permissions");
                    if(!defined(cust_perm)) {
                        if(isTrue(perm_elev)) {
                            sa2.setValue("all-permissions");
                        } else {
                            sa2.setValue("sandbox");
                        }
                    } else {
                        if(cust_perm == "all-permissions") {
                            sa2.setValue("all-permissions");
                        } else {
                            sa2.setValue("sandbox");
                        }
                    }
                    man.addConfiguredAttribute(sa2);
                    // Note: see JavaFX Jira issue #RT-25003 if attribute names are created lowercase in manifest

                    jar.perform();
                ]]>
            </script>
            <antcall target="-post-jfx-jar"/>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                </fileset>
            </signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign-blob">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <echo message="Launching &lt;fx:signjar&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <fx:signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                </fileset>
            </fx:signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign-preloader">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </signjar>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-sign-blob-preloader">
        <sequential>
            <echo message="keystore=${javafx.signjar.keystore}" level="verbose"/>
            <echo message="storepass=${javafx.signjar.storepass}" level="verbose"/>
            <echo message="alias=${javafx.signjar.alias}" level="verbose"/>
            <echo message="keypass=${javafx.signjar.keypass}" level="verbose"/>
            <signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </signjar>
            <echo message="Launching &lt;fx:signjar&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <fx:signjar keystore="${javafx.signjar.keystore}"
                storepass="${javafx.signjar.storepass}"
                alias="${javafx.signjar.alias}"
                keypass="${javafx.signjar.keypass}">
                <fileset dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fileset>
            </fx:signjar>
        </sequential>
    </macrodef>

    <macrodef name="deploy-process-template">
        <sequential>
            <echo message="javafx.run.htmltemplate = ${javafx.run.htmltemplate}" level="verbose"/>
            <pathconvert property="javafx.run.htmltemplate.processed">
                <path path="${javafx.run.htmltemplate}"/>
                <mapper>
                     <chainedmapper>
                          <flattenmapper/>
                          <globmapper from="*" to="${jfx.deployment.dir}${file.separator}*" casesensitive="no"/>
                     </chainedmapper>
                </mapper>
            </pathconvert>
            <echo message="javafx.run.htmltemplate.processed = ${javafx.run.htmltemplate.processed}" level="verbose"/>
        </sequential>
    </macrodef>

    <!-- fx:deploy scripted call enables passing of arbitrarily long lists of params, vmoptions and callbacks and fx-version dependent behavior -->
    <macrodef name="deploy-deploy">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <antcall target="-call-pre-jfx-native"/>
            <echo message="javafx.ant.classpath = ${javafx.ant.classpath}" level="verbose"/>
            <typedef name="fx_deploy" classname="com.sun.javafx.tools.ant.DeployFXTask" classpath="${javafx.ant.classpath}"/>
            <echo message="Launching &lt;fx:deploy&gt; task from ${ant-javafx.jar.location}" level="info"/>
            <property name="pp_deploy_dir" value="${jfx.deployment.dir}"/>
            <property name="pp_deploy_fs1" value="lib${file.separator}${javafx.preloader.jar.filename}"/>
            <property name="pp_deploy_fs2" value="lib${file.separator}*.jar"/>
            <echo message="deploy_deploy: pp_deploy_dir = ${pp_deploy_dir}" level="verbose"/>
            <echo message="deploy_deploy: pp_deploy_fs1 = ${pp_deploy_fs1}" level="verbose"/>
            <echo message="deploy_deploy: pp_deploy_fs2 = ${pp_deploy_fs2}" level="verbose"/>
            <echo message="JavaScript: deploy-deploy" level="verbose"/>
            <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
            <script language="javascript">
                <![CDATA[
                    function isTrue(prop) {
                        return prop != null && 
                           (prop.toLowerCase()=="true" || prop.toLowerCase()=="yes" || prop.toLowerCase()=="on");
                    }                    
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function replaceSuffix(s, os, ns) {
                        return prefix(s, s.indexOf(os)).concat(ns);
                    }
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    function contains(array, prop) {
                        for (var i = 0; i < array.length; i++) {
                            var s1 = new String(array[i]);
                            var s2 = new String(prop);
                            if( s1.toLowerCase() == s2.toLowerCase() ) {
                                return true;
                            }
                        }
                        return false;
                    }
                    var S = java.io.File.separator;
                    var JFXPAR = "javafx.param";
                    var JFXPARN = "name";
                    var JFXPARV = "value";
                    var JFXPARH = "hidden";
                    var JFXCALLB = "javafx.jscallback";
                    var JFXLAZY = "download.mode.lazy.jar";
                    var withpreloader = new String(project.getProperty("app-with-preloader"));
                    var fx_ant_api_1_1 = new String(project.getProperty("have-fx-ant-api-1.1"));
                    var fx_ant_api_1_2 = new String(project.getProperty("have-fx-ant-api-1.2"));
                    var have_jdk_pre7u14 = new String(project.getProperty("have-jdk-pre7u14"));
                    var fx_in_swing_app = new String(project.getProperty("fx-in-swing-app"));
                    var debug_in_browser = new String(project.getProperty("project.state.debugging.in.browser"));

                    // get jars with lazy download mode property set
                    function getLazyJars() {
                        var jars = new Array();
                        var keys = project.getProperties().keys();
                        while(keys.hasMoreElements()) {
                            var pn = new String(keys.nextElement());
                            if(startsWith(pn, JFXLAZY)) {
                                var fname = pn.substring(JFXLAZY.length+1);
                                jars.push(fname);
                            }
                        }
                        return jars.length > 0 ? jars : null;
                    }
                    // set download mode of dependent libraries
                    function setDownloadMode(fsEager, fsLazy, jars) {
                        for(var i = 0; i < jars.length; i++) {
                            fsEager.setExcludes("lib" + S + jars[i]);
                            fsLazy.setIncludes("lib" + S + jars[i]);
                        }
                    }
                    // convert path to absolute if relative
                    function derelativizePath(path) {
                        var f = new java.io.File(path);
                        if(!f.exists()) {
                            f = new java.io.File(new String(project.getBaseDir()) + S + path);
                        }
                        if(f.exists()) {
                            try {
                                return f.getCanonicalPath();
                            } catch(err) {
                                return path;
                            }
                        }
                        return path;
                    }
                    
                    // fx:deploy
                    var deploy = project.createTask("fx_deploy");
                    deploy.setProject(project);
                    var width = new String(project.getProperty("javafx.width"));
                    var height = new String(project.getProperty("javafx.height"));
                    var outdir = new String(project.getProperty("jfx.deployment.dir"));
                    var embedJNLP = new String(project.getProperty("javafx.deploy.embedJNLP"));
                    var updatemode = new String(project.getProperty("update-mode"));
                    var outfile = new String(project.getProperty("application.title"));
                    var includeDT = new String(project.getProperty("javafx.deploy.includeDT"));
                    var offline = new String(project.getProperty("javafx.deploy.allowoffline"));
                    if (width.indexOf("%") != -1) {
                        deploy.setEmbeddedWidth(width);
                        deploy.setWidth(800);
                    } else {
                        deploy.setWidth(width);
                    }
                    if (height.indexOf("%") != -1) {
                        deploy.setEmbeddedHeight(height);
                        deploy.setHeight(600);
                    } else {
                        deploy.setHeight(height);
                    }
                    deploy.setOutdir(outdir);
                    deploy.setEmbedJNLP(isTrue(embedJNLP));
                    deploy.setUpdateMode(updatemode);
                    deploy.setOutfile(outfile);
                    deploy.setIncludeDT(isTrue(includeDT));
                    if(defined(offline)) {
                        if(isTrue(fx_ant_api_1_1)) {
                            deploy.setOfflineAllowed(isTrue(offline));
                        } else {
                            print("Warning: offlineAllowed not supported by this version of JavaFX SDK deployment Ant task. Please upgrade JavaFX to 2.0.2 or higher.");
                        }
                    }
                    // native packaging (time consuming, thus applied in explicit build only)
                    var nativeEnabled = new String(project.getProperty("do.build.native.package"));
                    var nativeType = new String(project.getProperty("javafx.native.bundling.type"));
                    var projStateRun = new String(project.getProperty("project.state.running"));
                    var projStateDbg = new String(project.getProperty("project.state.debugging"));
                    var projStatePrf = new String(project.getProperty("project.state.profiling"));
                    if(isTrue(nativeEnabled) && defined(nativeType) && nativeType != "none") {
                        if(!isTrue(projStateRun) && !isTrue(projStateDbg) && !isTrue(projStatePrf)) {
                            if(isTrue(fx_ant_api_1_2)) {
                                deploy.setNativeBundles(nativeType);
                                print("Note: To create native bundles the <fx:deploy> task may require external tools. See JavaFX 2.2+ documentation for details.");
                                print("");
                                print("Launching <fx:deploy> in native packager mode...");
                            } else {
                                print("Warning: Native packaging is not supported by this version of JavaFX SDK deployment Ant task. Please upgrade to JDK 7u6 or higher.");
                            }
                        }
                    }

                    // fx:application
                    var app = deploy.createApplication();
                    app.setProject(project);
                    var title = new String(project.getProperty("application.title"));
                    var mainclass;
                    if(isTrue(fx_in_swing_app) && isTrue(fx_ant_api_1_2)) {
                        mainclass = new String(project.getProperty("main.class"));
                        app.setToolkit("swing");
                    } else {
                        mainclass = new String(project.getProperty("javafx.main.class"));
                    }
                    var fallback = new String(project.getProperty("javafx.fallback.class"));
                    app.setName(title);
                    app.setMainClass(mainclass);
                    app.setFallbackClass(fallback);
                    if(isTrue(withpreloader)) {
                        preloaderclass = new String(project.getProperty("javafx.preloader.class"));
                        app.setPreloaderClass(preloaderclass);
                    }
                    var appversion = new String(project.getProperty("javafx.application.implementation.version"));
                    if(defined(appversion)) {
                        app.setVersion(appversion);
                    } else {
                        app.setVersion("1.0");
                    }
                    // fx:param, fx:argument
                    var searchHides = project.getProperties().keys();
                    var hides = new Array();
                    while(searchHides.hasMoreElements()) {
                        // collect all hidden property names
                        var pns = new String(searchHides.nextElement());
                        if(startsWith(pns, JFXPAR) && endsWith(pns, JFXPARN)) {
                            var propns = new String(project.getProperty(pns));
                            var phs = replaceSuffix(pns, JFXPARN, JFXPARH);
                            var proph = new String(project.getProperty(phs));
                            if(isTrue(proph)) {
                                hides.push(propns);
                            }
                         }
                    }
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXPAR) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn) && !contains(hides, propn)) {
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    var par = app.createParam();
                                    par.setName(propn);
                                    par.setValue(propv);
                                } else {
                                    if(isTrue(fx_ant_api_1_1)) {
                                        var arg = app.createArgument();
                                        arg.addText(propn);
                                    } else {
                                        print("Warning: Unnamed parameters not supported by this version of JavaFX SDK deployment Ant tasks. Upgrade JavaFX to 2.0.2 or higher.");
                                    }
                                }
                            }
                        }
                    }
                    
                    // fx:resources
                    var res = deploy.createResources();
                    res.setProject(project);
                    var deploydir = new String(project.getProperty("pp_deploy_dir"));
                    if(isTrue(withpreloader)) {
                        var f1 = res.createFileSet();
                        f1.setProject(project);
                        f1.setDir(new java.io.File(deploydir));
                        var i1 = new String(project.getProperty("pp_deploy_fs1"));
                        f1.setIncludes(i1);
                        f1.setRequiredFor("preloader");
                        var f2 = res.createFileSet();
                        f2.setProject(project);
                        f2.setDir(new java.io.File(deploydir));
                        var i2a = new String(project.getProperty("jfx.deployment.jar"));
                        var i2b = new String(project.getProperty("pp_deploy_fs2"));
                        var e2c = new String(project.getProperty("pp_deploy_fs1"));
                        f2.setIncludes(i2a);
                        f2.setIncludes(i2b);
                        f2.setExcludes(e2c);
                        f2.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var f3 = res.createFileSet();
                            f3.setProject(project);
                            f3.setDir(new java.io.File(deploydir));
                            f3.setRequiredFor("runtime");
                            setDownloadMode(f2,f3,lazyjars);
                        }
                    } else {
                        var fn = res.createFileSet();
                        fn.setProject(project);
                        fn.setDir(new java.io.File(deploydir));
                        var ia = new String(project.getProperty("jfx.deployment.jar"));
                        var ib = new String(project.getProperty("pp_deploy_fs2"));
                        fn.setIncludes(ia);
                        fn.setIncludes(ib);
                        fn.setRequiredFor("startup");
                        var lazyjars = getLazyJars();
                        if(lazyjars != null) {
                            var fn2 = res.createFileSet();
                            fn2.setProject(project);
                            fn2.setDir(new java.io.File(deploydir));
                            fn2.setRequiredFor("runtime");
                            setDownloadMode(fn,fn2,lazyjars);
                        }
                    }
                    
                    // fx:info
                    var info = deploy.createInfo();
                    info.setProject(project);
                    var vendor = new String(project.getProperty("application.vendor"));
                    var description = new String(project.getProperty("application.desc"));
                    info.setTitle(title); // title known from before
                    info.setVendor(vendor);
                    info.setDescription(description);
                    var splash = new String(project.getProperty("javafx.deploy.splash"));
                    if(defined(splash)) {
                        if(isTrue(fx_ant_api_1_1)) {
                            var sicon = info.createSplash();
                            sicon.setHref(splash);
                            sicon.setMode("any");
                            print("Adding splash image reference: " + splash);
                        } else {
                            print("Warning: Splash Image not supported by this version of JavaFX SDK deployment Ant task. Please upgrade JavaFX to 2.0.2 or higher.");
                        }
                    }
                    if(isTrue(nativeEnabled) && defined(nativeType) && nativeType != "none") {
                        var icon = new String(project.getProperty("javafx.deploy.icon.native"));
                        if(defined(icon)) {
                            if(isTrue(fx_ant_api_1_2) && !isTrue(have_jdk_pre7u14)) {
                                var dicon = derelativizePath(icon);
                                // create temporary icon copy renamed to application name (required by native packager)
                                var baseDir = new String(project.getProperty("basedir"));
                                var buildDir = new String(project.getProperty("build.dir"));
                                var deployBase = new String(project.getProperty("jfx.deployment.base"));
                                var copyTask = project.createTask("copy");
                                var source = new java.io.File(dicon);
                                var sourceName = new String(source.getName());
                                var lastDot = sourceName.lastIndexOf(".");
                                var sourceExt;
                                if(lastDot >=0) {
                                    sourceExt = sourceName.substr(lastDot);
                                } else {
                                    sourceExt = new String("");
                                }
                                var target = new java.io.File(baseDir.concat(S).concat(buildDir).concat(S).concat("icon").concat(S).concat(deployBase).concat(sourceExt));
                                copyTask.setFile(source);
                                copyTask.setTofile(target);
                                copyTask.setFlatten(true);
                                copyTask.setFailOnError(false);
                                copyTask.perform();
                                var tempicon;
                                if(target.exists()) {
                                    try {
                                        tempicon = target.getCanonicalPath();
                                    } catch(err) {
                                        tempicon = dicon;
                                    }
                                } else {
                                    tempicon = dicon;
                                }
                                var nicon = info.createIcon();
                                nicon.setHref(tempicon);
                                print("Source native icon reference: " + dicon);
                                print("Processed native icon reference: " + tempicon);
                            } else {
                                print("Warning: Native Package icon not supported by this version of JavaFX SDK deployment Ant task. Please upgrade to JDK7u14.");
                            }
                        }
                    } else {
                        var icon = new String(project.getProperty("javafx.deploy.icon"));
                        if(defined(icon)) {
                            if(isTrue(fx_ant_api_1_1)) {
                                var iicon = info.createIcon();
                                iicon.setHref(icon);
                                print("Adding WebStart icon reference: " + icon);
                            } else {
                                print("Warning: WebStart Icon not supported by this version of JavaFX SDK deployment Ant task. Please upgrade JavaFX to 2.0.2 or higher.");
                            }
                        }
                    }
                    
                    // fx:permissions
                    var perm = deploy.createPermissions();
                    perm.setProject(project);
                    var elev = new String(project.getProperty("permissions.elevated"));
                    perm.setElevated(isTrue(elev));
                    
                    // fx:preferences
                    var pref = deploy.createPreferences();
                    pref.setProject(project);
                    var scut = new String(project.getProperty("javafx.deploy.adddesktopshortcut"));
                    var instp = new String(project.getProperty("javafx.deploy.installpermanently"));
                    var smenu = new String(project.getProperty("javafx.deploy.addstartmenushortcut"));
                    pref.setShortcut(isTrue(scut));
                    pref.setInstall(isTrue(instp));
                    pref.setMenu(isTrue(smenu));

                    // fx:template
                    var templ = new String(project.getProperty("javafx.run.htmltemplate"));
                    var templp = new String(project.getProperty("javafx.run.htmltemplate.processed"));
                    if(defined(templ) && defined(templp)) {
                        var temp = deploy.createTemplate();
                        temp.setProject(project);
                        temp.setFile(new java.io.File(templ));
                        temp.setTofile(new java.io.File(templp));
                    }

                    // fx:platform
                    var plat = deploy.createPlatform();
                    plat.setProject(project);
                    var requestRT = new String(project.getProperty("javafx.deploy.request.runtime"));
                    if(defined(requestRT)) {
                        plat.setJavafx(requestRT);
                    }
                    var jvmargs = new String(project.getProperty("run.jvmargs"));
                    if(defined(jvmargs)) {
                        var jvmargss = jvmargs.split(" ");
                        for(var i = 0; i < jvmargss.length; i++) {
                            if(defined(jvmargss[i])) {
                                var vmarg = plat.createJvmarg();
                                vmarg.setValue(jvmargss[i]);
                            }
                        }
                    }
                    if(isTrue(debug_in_browser)) {
                        var vmarg = plat.createJvmarg();
                        vmarg.setValue(new String("-ea:javafx.browserdebug"));
                    }
                    if(isTrue(nativeEnabled) && defined(nativeType) && nativeType != "none") {
                        if(!isTrue(projStateRun) && !isTrue(projStateDbg) && !isTrue(projStatePrf)) {
                            if(plat.setBasedir) {
                                var sdkdir = new String(project.getProperty("javafx.sdk"));
                                if(defined(sdkdir)) {
                                    plat.setBasedir(sdkdir);
                                }
                            } else {
                                print("Note: the current version of native packager Ant task can bundle the default JRE only.");
                            }
                        }
                    }
                    
                    // fx:callbacks
                    var callbs = deploy.createCallbacks();
                    callbs.setProject(project);
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXCALLB)) {
                            var prop = new String(project.getProperty(pn));
                            if(defined(prop)) {
                                var cname = pn.substring(JFXCALLB.length+1);
                                var cb = callbs.createCallback();
                                cb.setProject(project);
                                cb.setName(cname);
                                cb.addText(prop);
                            }
                        }
                    }
                    
                    deploy.perform();
                ]]>
            </script>
            <antcall target="-post-jfx-deploy"/>
            <antcall target="-call-post-jfx-native"/>
        </sequential>
    </macrodef>

    <!-- JavaFX SDK 2.0.x and 2.1.x deploy task can not generate pre-FX jnlp which is needed for FX-in-Swing projects-->
    <macrodef name="deploy-deploy-swing">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <local name="permissions-elevated-token"/>
            <condition property="permissions-elevated-token" value="${line.separator}    &lt;security&gt;${line.separator}        &lt;all-permissions/&gt;${line.separator}    &lt;/security&gt;" else="">
                <isset property="permissions-elevated"/>
            </condition>
            <local name="offline-allowed-token"/>
            <condition property="offline-allowed-token" value="${line.separator}        &lt;offline-allowed/&gt;" else="">
                <isset property="offline-allowed"/>
            </condition>
            <local name="update-mode-background-token"/>
            <condition property="update-mode-background-token" value="background" else="always">
                <isset property="update-mode-background"/>
            </condition>
            <local name="html-template-processed-available"/>
            <condition property="html-template-processed-available">
                <and>
                    <isset property="javafx.run.htmltemplate.processed"/>
                    <not>
                        <equals arg1="${javafx.run.htmltemplate.processed}" arg2=""/>
                    </not>
                </and>
            </condition>
            <local name="javafx.deploy.icon.basename"/>
            <basename property="javafx.deploy.icon.basename" file="${javafx.deploy.icon}"/>
            <local name="local-icon-filename-available"/>
            <condition property="local-icon-filename-available">
                <and>
                    <isset property="icon-available"/>
                    <isset property="javafx.deploy.icon.basename"/>
                    <not><equals arg1="${javafx.deploy.icon.basename}" arg2=""/></not>
                    <not><contains string="${javafx.deploy.icon.basename}" substring="$${javafx" casesensitive="false"/></not>
                    <not><contains string="${javafx.deploy.icon}" substring="http:" casesensitive="false"/></not>
                </and>
            </condition>
            <local name="icon-token"/>
            <condition property="icon-token" value="${line.separator}        &lt;icon href=&quot;${javafx.deploy.icon.basename}&quot; kind=&quot;default&quot;/&gt;">
                <isset property="local-icon-filename-available"/>
            </condition>
            <condition property="icon-token" value="${line.separator}        &lt;icon href=&quot;${javafx.deploy.icon}&quot; kind=&quot;default&quot;/&gt;" else="">
                <isset property="icon-available"/>
            </condition>
            <basename property="dist.filename" file="${dist.jar}" suffix=".jar"/>
            <length file="${dist.jar}" property="dist.jar.size" />
            <local name="vmargs-token"/>
            <condition property="vmargs-token" value="java-vm-args=&quot;${run.jvmargs}&quot; " else="">
                <isset property="vmargs-available"/>
            </condition>
            <local name="applet-params-token"/>
            <local name="application-args-token"/>
            <echo message="JavaScript: deploy-deploy-swing 1" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function prefix(s, len) {
                        if(s == null || len <= 0 || s.length == 0) {
                            return new String("");
                        }
                        return new String(s.substr(0, len));
                    }
                    function replaceSuffix(s, os, ns) {
                        return prefix(s, s.indexOf(os)).concat(ns);
                    }
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function endsWith(s, suffix) {
                        var i = s.lastIndexOf(suffix);
                        return  (i != -1) && (i == (s.length - suffix.length));
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    var JFXPAR = "javafx.param";
                    var JFXPARN = "name";
                    var JFXPARV = "value";

                    var params = new java.lang.StringBuilder();
                    var args = new java.lang.StringBuilder();
                    var keys = project.getProperties().keys();
                    while(keys.hasMoreElements()) {
                        var pn = new String(keys.nextElement());
                        if(startsWith(pn, JFXPAR) && endsWith(pn, JFXPARN)) {
                            var propn = new String(project.getProperty(pn));
                            if(defined(propn)) {
                                var pv = replaceSuffix(pn, JFXPARN, JFXPARV);
                                var propv = new String(project.getProperty(pv));
                                if(defined(propv)) {
                                    params.append("\n        <param name=\"");
                                    params.append(propn);
                                    params.append("\" value=\"");
                                    params.append(propv);
                                    params.append("\"/>");
                                    args.append("\n        <argument>");
                                    args.append(propn);
                                    args.append("=");
                                    args.append(propv);
                                    args.append("</argument>");
                                } else {
                                    params.append("\n        <param name=\"");
                                    params.append(propn);
                                    params.append("\" value=\"\"/>");
                                    args.append("\n        <argument>");
                                    args.append(propn);
                                    args.append("</argument>");
                                }
                            }
                        }
                    }
                    project.setProperty("applet-params-token", new String(params.toString()));
                    project.setProperty("application-args-token", new String(args.toString()));
                ]]>
            </script>
            <local name="application.desc.processed"/>
            <condition property="application.desc.processed" value="${application.desc}" else="Swing applet embedding JavaFX components.">
                <isset property="application.desc"/>
            </condition>
            <filterchain id="jnlp.template.filter">
                <replacetokens>
                    <token key="NAME" value="${dist.filename}"/>
                    <token key="MAINCLASS" value="${main.class}"/>
                    <token key="FILESIZE" value="${dist.jar.size}"/>
                    <token key="VENDOR" value="${application.vendor}"/>
                    <token key="TITLE" value="${application.title}"/>
                    <token key="DESCRIPTION" value="${application.desc.processed}"/>
                    <token key="WIDTH" value="${javafx.run.width}"/>
                    <token key="HEIGHT" value="${javafx.run.height}"/>
                    <token key="PERMISSIONS" value="${permissions-elevated-token}"/>
                    <token key="OFFLINE" value="${offline-allowed-token}"/>
                    <token key="UPDATEMODE" value="${update-mode-background-token}"/>
                    <token key="ICON" value="${icon-token}"/>
                    <token key="VMARGS" value="${vmargs-token}"/>
                    <token key="PARAMETERS" value="${applet-params-token}"/>
                    <token key="ARGUMENTS" value="${application-args-token}"/>
                </replacetokens>
            </filterchain>
            <copy file="${basedir}${file.separator}nbproject${file.separator}templates${file.separator}FXSwingTemplateApplication.jnlp" 
                    tofile="${dist.dir}${file.separator}${dist.filename}_application.jnlp" >
                    <filterchain refid="jnlp.template.filter"/>
            </copy>        
            <copy file="${basedir}${file.separator}nbproject${file.separator}templates${file.separator}FXSwingTemplateApplet.jnlp" 
                    tofile="${dist.dir}${file.separator}${dist.filename}_applet.jnlp" >
                    <filterchain refid="jnlp.template.filter"/>
            </copy>        
            <copy file="${basedir}${file.separator}nbproject${file.separator}templates${file.separator}FXSwingTemplate.html" 
                    tofile="${dist.dir}${file.separator}${dist.filename}.html" >
                    <filterchain refid="jnlp.template.filter"/>
            </copy>
            <echo message="JavaScript: deploy-deploy-swing 2" level="verbose"/>
            <script language="javascript">
                <![CDATA[
                    function startsWith(s, prefix) {
                        return (s != null) && (s.indexOf(prefix) == 0);
                    }
                    function defined(s) {
                        return (s != null) && (s != "null") && (s.length > 0);
                    }
                    var PREF = "file:";
                    var doCopyIcon = new String(project.getProperty("local-icon-filename-available"));
                    if(defined(doCopyIcon)) {
                        var iconProp = new String(project.getProperty("javafx.deploy.icon"));
                        if(startsWith(iconProp, PREF)) {
                            iconProp = iconProp.slice(PREF.length);
                        }
                        while(iconProp.charAt(0) == "/") {
                            iconProp = iconProp.slice(1);
                        }
                        var S = java.io.File.separator;
                        var baseDir = new String(project.getProperty("basedir"));
                        var distDir = new String(project.getProperty("dist.dir"));
                        var copyTask = new String(project.createTask("copy"));
                        var source = new java.io.File(iconProp);
                        var target = new java.io.File(baseDir.concat(S).concat(distDir));
                        copyTask.setFile(source);
                        copyTask.setTodir(target);
                        copyTask.setFlatten(true);
                        copyTask.setFailOnError(false);
                        copyTask.perform();
                    }
                    var doCopyHTMLFrom = new String(project.getProperty("html-template-available"));
                    var doCopyHTMLTo = new String(project.getProperty("html-template-processed-available"));
                    if(defined(doCopyHTMLFrom) && defined(doCopyHTMLTo)) {
                        var htmlFrom = new String(project.getProperty("javafx.run.htmltemplate"));
                        if(startsWith(htmlFrom, PREF)) {
                            htmlFrom = htmlFrom.slice(PREF.length);
                        }
                        while(startsWith(htmlFrom, "/")) {
                            htmlFrom = htmlFrom.slice(1);
                        }
                        var htmlTo = new String(project.getProperty("javafx.run.htmltemplate.processed"));
                        if(startsWith(htmlTo, PREF)) {
                            htmlTo = htmlTo.slice(PREF.length);
                        }
                        while(startsWith(htmlTo, "/")) {
                            htmlTo = htmlTo.slice(1);
                        }
                        var copyTask = project.createTask("copy");
                        var source = new java.io.File(htmlFrom);
                        var target = new java.io.File(htmlTo);
                        copyTask.setFile(source);
                        copyTask.setTofile(target);
                        copyTask.setFailOnError(false);
                        copyTask.perform();
                    }
                ]]>
            </script>
            <antcall target="-post-jfx-deploy"/>
        </sequential>
    </macrodef>


    <!-- Fallback Project Deployment Macros To Support At Least Partially JDKs Without JavaScript Support -->
    
    <macrodef name="fallback-deploy-application-def">
        <sequential>
            <echo message="Warning: Parameters (if any) not passed to &lt;fx:application&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:application id="fxApp"
                name="${application.title}"
                mainClass="${javafx.main.class}"
                fallbackClass="${javafx.fallback.class}">
                <!-- PARAMETERS NOT PASSED IN FALLBACK -->
            </fx:application>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-application-def-preloader">
        <sequential>
            <echo message="Warning: Parameters (if any) not passed to &lt;fx:application&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:application id="fxApp"
                name="${application.title}"
                mainClass="${javafx.main.class}"
                preloaderClass="${javafx.preloader.class}"
                fallbackClass="${javafx.fallback.class}">
                <!-- PARAMETERS NOT PASSED IN FALLBACK -->
            </fx:application>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-application-def-swing">
        <sequential>
            <echo message="Warning: Parameters (if any) not passed to &lt;fx:application&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:application id="fxApp"
                name="${application.title}"
                mainClass="${main.class}"
                fallbackClass="${javafx.fallback.class}"
                toolkit="swing">
                <!-- PARAMETERS NOT PASSED IN FALLBACK -->
            </fx:application>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-resources">
        <sequential>
            <fx:resources id="appRes">
                <fx:fileset requiredFor="startup" dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${jfx.deployment.jar}"/>
                </fx:fileset>
            </fx:resources>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-resources-preloader">
        <sequential>
            <fx:resources id="appRes">
                <fx:fileset requiredFor="preloader" dir="${jfx.deployment.dir}">
                    <include name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                </fx:fileset>
                <fx:fileset requiredFor="startup" dir="${jfx.deployment.dir}">
                    <include name="${jfx.deployment.jar}"/>
                    <include name="lib${file.separator}*.jar"/>
                    <exclude name="lib${file.separator}${javafx.preloader.jar.filename}"/>
                    <exclude name="lib${file.separator}${jfx.deployment.jar}"/>
                </fx:fileset>
            </fx:resources>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-jar">
        <sequential>
            <antcall target="-pre-jfx-jar"/>
            <fx:jar destfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}">
                <fx:application refid="fxApp"/>
                <fx:resources refid="appRes"/>
                <fileset dir="${build.classes.dir}">
                    <exclude name="**${file.separator}*.${css-exclude-ext}"/>
                </fileset>
                <manifest>
                    <attribute name="Implementation-Vendor" value="${application.vendor}"/>
                    <attribute name="Implementation-Title" value="${application.title}"/>
                    <attribute name="Implementation-Version" value="1.0"/>
                </manifest>
            </fx:jar>
            <antcall target="-post-jfx-jar"/>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-deploy">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <echo message="Warning: JVM Arguments and Callbacks (if any) not passed to &lt;fx:deploy&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <fx:deploy width="${javafx.width}" height="${javafx.height}"
                      outdir="${jfx.deployment.dir}" embedjnlp="true" updatemode="${update-mode}"
                      outfile="${application.title}" includeDT="${javafx.deploy.includeDT}">
                <fx:application refid="fxApp"/>
                <fx:resources refid="appRes"/>
                <fx:info title="${application.title}" vendor="${application.vendor}"/>
                <fx:permissions elevated="${permissions.elevated}"/>
                <fx:preferences shortcut="${javafx.deploy.adddesktopshortcut}" install="${javafx.deploy.installpermanently}" menu="${javafx.deploy.addstartmenushortcut}"/>
                <!-- PLATFORM NOT PASSED IN FALLBACK -->
                <!-- CALLBACKS NOT PASSED IN FALLBACK -->
            </fx:deploy>
            <antcall target="-post-jfx-deploy"/>
        </sequential>
    </macrodef>

    <macrodef name="fallback-deploy-deploy-template">
        <sequential>
            <antcall target="-pre-jfx-deploy"/>
            <echo message="Warning: JVM Arguments and Callbacks (if any) not passed to &lt;fx:deploy&gt; in fallback build mode due to JDK missing JavaScript support."/>
            <deploy-process-template/>
            <fx:deploy width="${javafx.width}" height="${javafx.height}"
                      outdir="${jfx.deployment.dir}" embedjnlp="true" updatemode="${update-mode}"
                      outfile="${application.title}" includeDT="${javafx.deploy.includeDT}">
                <fx:application refid="fxApp"/>
                <fx:resources refid="appRes"/>
                <fx:info title="${application.title}" vendor="${application.vendor}"/>
                <fx:permissions elevated="${permissions.elevated}"/>
                <fx:preferences shortcut="${javafx.deploy.adddesktopshortcut}" install="${javafx.deploy.installpermanently}" menu="${javafx.deploy.addstartmenushortcut}"/>
                <fx:template file="${javafx.run.htmltemplate}" tofile="${javafx.run.htmltemplate.processed}"/>
                <!-- PLATFORM NOT PASSED IN FALLBACK -->
                <!-- CALLBACKS NOT PASSED IN FALLBACK -->
            </fx:deploy>
            <antcall target="-post-jfx-deploy"/>
        </sequential>
    </macrodef>


    <!-- Project Deployment Targets -->

    <target name="-check-sign" depends="-check-project,-javafx-init-keystore" if="javafx.signed.true+signjars.task.available">
        <condition property="sign-nopreloader-notemplate">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-preloader-notemplate">
            <and>
                <isset property="app-with-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-nopreloader-template">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-preloader-template">
            <and>
                <isset property="app-with-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-nopreloader-notemplate-swing">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <isset property="fx-in-swing-app-workaround"/>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-nopreloader-template-swing">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <isset property="fx-in-swing-app-workaround"/>
                <not><isset property="use-blob-signing"/></not>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-notemplate">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-preloader-notemplate">
            <and>
                <isset property="app-with-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-template">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-preloader-template">
            <and>
                <isset property="app-with-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="fx-in-swing-app-workaround"/></not>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-notemplate-swing">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <isset property="fx-in-swing-app-workaround"/>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
        <condition property="sign-blob-nopreloader-template-swing">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <isset property="fx-in-swing-app-workaround"/>
                <isset property="use-blob-signing"/>
            </and>
        </condition>
    </target>
    <target name="-check-nosign" depends="-check-project">
        <condition property="nosign-nopreloader-notemplate">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-preloader-notemplate">
            <and>
                <isset property="app-with-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-nopreloader-template">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-preloader-template">
            <and>
                <isset property="app-with-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="javafx.signed.true"/></not>
                <not><isset property="fx-in-swing-app-workaround"/></not>
            </and>
        </condition>
        <condition property="nosign-nopreloader-notemplate-swing">
            <and>
                <isset property="app-without-preloader"/>
                <not><isset property="html-template-available"/></not>
                <not><isset property="javafx.signed.true"/></not>
                <isset property="fx-in-swing-app-workaround"/>
            </and>
        </condition>
        <condition property="nosign-nopreloader-template-swing">
            <and>
                <isset property="app-without-preloader"/>
                <isset property="html-template-available"/>
                <not><isset property="javafx.signed.true"/></not>
                <isset property="fx-in-swing-app-workaround"/>
            </and>
        </condition>
    </target>


    <!-- WITH SIGNING -->

    <!-- project without preloader -->
    <!-- no html template -->
    <target name="-deploy-app-sign-nopreloader-notemplate" depends="-check-sign" if="sign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-notemplate" depends="-check-sign" if="sign-blob-nopreloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- no html template -->
    <target name="-deploy-app-sign-preloader-notemplate" depends="-check-sign" if="sign-preloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-preloader/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-preloader-notemplate" depends="-check-sign" if="sign-blob-preloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob-preloader/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <target name="-deploy-app-sign-nopreloader-template" depends="-check-sign" if="sign-nopreloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-template" depends="-check-sign" if="sign-blob-nopreloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- html template -->
    <target name="-deploy-app-sign-preloader-template" depends="-check-sign" if="sign-preloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-preloader/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>
    <target name="-deploy-app-sign-blob-preloader-template" depends="-check-sign" if="sign-blob-preloader-template" unless="preloader-app">
        <echo message="-deploy-app-sign-blob-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob-preloader/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- no html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-sign-nopreloader-notemplate-swing" depends="-check-sign" if="sign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-deploy-swing/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-notemplate-swing" depends="-check-sign" if="sign-blob-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-blob-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-deploy-swing/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-sign-nopreloader-template-swing" depends="-check-sign" if="sign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign/>
        <deploy-process-template/>
        <deploy-deploy-swing/>
    </target>
    <target name="-deploy-app-sign-blob-nopreloader-template-swing" depends="-check-sign" if="sign-blob-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-sign-blob-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-sign-blob/>
        <deploy-process-template/>
        <deploy-deploy-swing/>
    </target>


    <!-- NO SIGNING -->

    <!-- project without preloader -->
    <!-- no html template -->
    <target name="-deploy-app-nosign-nopreloader-notemplate" depends="-check-nosign" if="nosign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-nosign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- no html template -->
    <target name="-deploy-app-nosign-preloader-notemplate" depends="-check-nosign" if="nosign-preloader-notemplate" unless="preloader-app">
        <echo message="-deploy-app-nosign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <target name="-deploy-app-nosign-nopreloader-template" depends="-check-nosign" if="nosign-nopreloader-template" unless="preloader-app">
        <echo message="-deploy-app-nosign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project with preloader -->
    <!-- html template -->
    <target name="-deploy-app-nosign-preloader-template" depends="-check-nosign" if="nosign-preloader-template" unless="preloader-app">
        <echo message="-deploy-app-nosign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-process-template/>
        <deploy-deploy/>
    </target>

    <!-- project without preloader -->
    <!-- no html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-nosign-nopreloader-notemplate-swing" depends="-check-nosign" if="nosign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-nosign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-deploy-swing/>
    </target>

    <!-- project without preloader -->
    <!-- html template -->
    <!-- FX in Swing app -->
    <target name="-deploy-app-nosign-nopreloader-template-swing" depends="-check-nosign" if="nosign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-deploy-app-nosign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <deploy-jar/>
        <deploy-process-template/>
        <deploy-deploy-swing/>
    </target>


    <!-- FALLBACK (NO JAVASCRIPT) TARGETS WITH SIGNING -->

    <target name="-check-fallback-sign-deploy-swing-possible" depends="-check-sign">
        <local name="fail-deploy-swing-possible"/>
        <condition property="fail-deploy-swing-possible">
            <and>
                <or>
                    <isset property="sign-nopreloader-notemplate-swing"/>
                    <isset property="sign-nopreloader-template-swing"/>
                </or>
                <not><isset property="have-fx-ant-api-1.2"/></not>
            </and>
        </condition>
        <fail message="Error: JavaFX SDK version 2.2 or newer is needed to deploy FX-in-Swing on JDK without JavaScript support." 
              if="fail-deploy-swing-possible"/>
    </target>
    
    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-sign-nopreloader-notemplate" depends="-check-sign" if="sign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-notemplate" depends="-check-sign" if="sign-blob-nopreloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-sign-preloader-notemplate" depends="-check-sign" if="sign-preloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-preloader/>
        <fallback-deploy-deploy/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-preloader-notemplate" depends="-check-sign" if="sign-blob-preloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-blob-preloader/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-sign-nopreloader-template" depends="-check-sign" if="sign-nopreloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy-template/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-template" depends="-check-sign" if="sign-blob-nopreloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-sign-preloader-template" depends="-check-sign" if="sign-preloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-preloader/>
        <fallback-deploy-deploy-template/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-preloader-template" depends="-check-sign" if="sign-blob-preloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-sign-blob-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <deploy-sign-blob-preloader/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-sign-nopreloader-notemplate-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-notemplate-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-sign-nopreloader-template-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign/>
        <fallback-deploy-deploy-template/>
    </target>
    <target name="-fallback-deploy-app-sign-blob-nopreloader-template-swing" depends="-check-fallback-sign-deploy-swing-possible" if="sign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-sign-blob-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <deploy-sign-blob/>
        <fallback-deploy-deploy-template/>
    </target>


    <!-- FALLBACK (NO JAVASCRIPT) TARGETS NO SIGNING -->

    <target name="-check-fallback-nosign-deploy-swing-possible" depends="-check-nosign">
        <local name="fail-deploy-swing-possible"/>
        <condition property="fail-deploy-swing-possible">
            <and>
                <or>
                    <isset property="nosign-nopreloader-notemplate-swing"/>
                    <isset property="nosign-nopreloader-template-swing"/>
                </or>
                <not><isset property="have-fx-ant-api-1.2"/></not>
            </and>
        </condition>
        <fail message="Error: JavaFX SDK version 2.2 or newer is needed to deploy FX-in-Swing on JDK without JavaScript support." 
              if="fail-deploy-swing-possible"/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-nosign-nopreloader-notemplate" depends="-check-nosign" if="nosign-nopreloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-nopreloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK no html template -->
    <target name="-fallback-deploy-app-nosign-preloader-notemplate" depends="-check-nosign" if="nosign-preloader-notemplate" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-preloader-notemplate" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-nosign-nopreloader-template" depends="-check-nosign" if="nosign-nopreloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-nopreloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project with preloader -->
    <!-- FALLBACK html template -->
    <target name="-fallback-deploy-app-nosign-preloader-template" depends="-check-nosign" if="nosign-preloader-template" unless="preloader-app">
        <echo message="-fallback-deploy-app-nosign-preloader-template" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-preloader/>
        <fallback-deploy-resources-preloader/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy-template/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK no html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-nosign-nopreloader-notemplate-swing" depends="-check-fallback-nosign-deploy-swing-possible" if="nosign-nopreloader-notemplate-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-nosign-nopreloader-notemplate-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy/>
    </target>

    <!-- FALLBACK project without preloader -->
    <!-- FALLBACK html template -->
    <!-- FALLBACK FX in Swing app -->
    <target name="-fallback-deploy-app-nosign-nopreloader-template-swing" depends="-check-fallback-nosign-deploy-swing-possible" if="nosign-nopreloader-template-swing" unless="preloader-app-no-workaround">
        <echo message="-fallback-deploy-app-nosign-nopreloader-template-swing" level="verbose"/>
        <deploy-defines/>
        <deploy-preprocess/>
        <fallback-deploy-application-def-swing/>
        <fallback-deploy-resources/>
        <fallback-deploy-jar/>
        <fallback-deploy-deploy-template/>
    </target>


    <!-- Project Build Targets -->

    <target name="jfx-build" depends="-jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>
    <target name="jfx-build-noscript" depends="-set-fallback-no-javascript, -jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>
    
    <target name="jfx-rebuild" depends="clean, -jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>
    <target name="jfx-rebuild-noscript" depends="-set-fallback-no-javascript, clean, -jfx-do-compile, -jfx-do-jar, -jfx-do-post-jar"/>

    <target name="jfx-build-native" depends="-set-do-build-native-package, -check-ant-jre-supports-native-packaging, -check-native-packager-external-tools, jfx-rebuild"/>
    <target name="jfx-build-native-noscript" depends="-set-do-build-native-package, -check-ant-jre-supports-native-packaging, -check-native-packager-external-tools, jfx-rebuild-noscript"/>

    <target name="build-native">
        <property name="javafx.native.bundling.type" value="${native.bundling.type}"/>
        <antcall target="jfx-build-native"/>
    </target>
    <target name="build-native-noscript">
        <property name="javafx.native.bundling.type" value="${native.bundling.type}"/>        
        <antcall target="jfx-build-native-noscript"/>
    </target>
    
    <target name="-check-do-jar">
        <condition property="do-jar-false">
            <and>
                <isset property="do.jar"/>
                <equals arg1="${do.jar}" arg2="false"/>
            </and>
        </condition>
    </target>
    <target name="-set-fallback-no-javascript">
        <property name="fallback.no.javascript" value="true"/>
        <echo message="Warning: Using fallback build infrastructure due to default JDK missing JavaScript support."/>
    </target>
    <target name="-jfx-do-compile" depends="-check-do-jar" if="do-jar-false">
        <antcall target="compile"/>
    </target>
    <target name="-jfx-do-jar" depends="-check-do-jar" unless="do-jar-false">
        <antcall target="jar"/>
    </target>
    <target name="-jfx-do-post-jar" depends="-init-check,-check-project" if="preloader-app">
        <!-- Preloaders are created using SE copylibs task that creates readme file relevant for SE only -->
        <delete file="${basedir}${file.separator}${dist.dir}${file.separator}README.TXT"/>
    </target>
    
    <target name="-set-do-build-native-package">
        <property name="do.build.native.package" value="true"/>
        <echo message="do.build.native.package = ${do.build.native.package}" level="verbose"/>
    </target>
    <target name="-check-ant-jre-supports-native-packaging" depends="-check-ant-jre-version">
        <fail message="Error:${line.separator}JavaFX native packager requires NetBeans to run on JDK 1.7u6 or later !" if="have-ant-jre-pre7u6"/>
    </target>
    
    <target name="-call-pre-jfx-native" if="do.build.native.package">
        <antcall target="-pre-jfx-native"/>
    </target>
    <target name="-call-post-jfx-native" if="do.build.native.package">
        <antcall target="-post-jfx-native"/>
    </target>

    <target name="-check-native-bundling-type" depends="-check-operating-system" if="do.build.native.package">
        <condition property="need.Inno.presence">
            <and>
                <isset property="running.on.windows"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="all" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="installer" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="exe" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <condition property="need.WiX.presence">
            <and>
                <isset property="running.on.windows"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="all" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="installer" casesensitive="false"/>
                    <equals arg1="${javafx.native.bundling.type}" arg2="msi" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <condition property="need.dpkg.presence">
            <and>
                <isset property="running.on.unix"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="deb" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <condition property="need.rpmbuild.presence">
            <and>
                <isset property="running.on.unix"/>
                <isset property="javafx.native.bundling.type"/>
                <or>
                    <equals arg1="${javafx.native.bundling.type}" arg2="rpm" casesensitive="false"/>
                </or>
            </and>
        </condition>
        <echo message="need.Inno.presence:${need.Inno.presence}" level="verbose"/>
        <echo message="need.WiX.presence:${need.WiX.presence}" level="verbose"/>
        <echo message="need.dpkg.presence:${need.dpkg.presence}" level="verbose"/>
        <echo message="need.rpmbuild.presence:${need.rpmbuild.presence}" level="verbose"/>
    </target>
    <target name="-check-Inno-presence" depends="-check-native-bundling-type" if="need.Inno.presence">
        <local name="exec-output"/>
        <local name="exec-error"/>
        <local name="exec-result"/>
        <exec executable="iscc" outputproperty="exec-output" failifexecutionfails="false" errorproperty="exec-error" resultproperty="exec-result"/>
        <echo message="exec-output:${exec-output}" level="verbose"/>
        <echo message="exec-error:${exec-error}" level="verbose"/>
        <echo message="exec-result:${exec-result}" level="verbose"/>
        <condition property="missing.Inno">
            <not><and>
                <contains string="${exec-output}" substring="Inno Setup"/>
                <not><contains string="${exec-output}" substring="Inno Setup 1"/></not>
                <not><contains string="${exec-output}" substring="Inno Setup 2"/></not>
                <not><contains string="${exec-output}" substring="Inno Setup 3"/></not>
                <not><contains string="${exec-output}" substring="Inno Setup 4"/></not>
            </and></not>
        </condition>
    </target>
    <target name="-check-WiX-presence" depends="-check-native-bundling-type" if="need.WiX.presence">
        <local name="exec-output"/>
        <local name="exec-error"/>
        <local name="exec-result"/>
        <exec executable="candle" outputproperty="exec-output" failifexecutionfails="false" errorproperty="exec-error" resultproperty="exec-result">
            <arg value="-?"/>
        </exec>
        <echo message="exec-output:${exec-output}" level="verbose"/>
        <echo message="exec-error:${exec-error}" level="verbose"/>
        <echo message="exec-result:${exec-result}" level="verbose"/>
        <condition property="missing.WiX">
            <not>
                <matches string="${exec-output}" pattern="windows\s+installer\s+xml\s+(toolset\s+)?compiler\s+version\s+3.*" casesensitive="false"/>
            </not>
        </condition>
    </target>
    <target name="-check-dpkg-presence" depends="-check-native-bundling-type" if="need.dpkg.presence">
        <local name="exec.which.dpkg.result"/>
        <local name="exec.which.dpkg.output"/>
        <exec executable="command" failifexecutionfails="false" failonerror="false" resultproperty="exec.which.dpkg.result" outputproperty="exec.which.dpkg.output">
            <arg line="-v dpkg"/>
        </exec>
        <condition property="missing.dpkg">
            <not><and>
                <isset property="exec.which.dpkg.result"/>
                <equals arg1="${exec.which.dpkg.result}" arg2="0"/>
                <isset property="exec.which.dpkg.output"/>
                <not><equals arg1="${exec.which.dpkg.output}" arg2=""/></not>
            </and></not>
        </condition>
    </target>
    <target name="-check-rpmbuild-presence" depends="-check-native-bundling-type" if="need.rpmbuild.presence">
        <local name="exec.which.rpmbuild.result"/>
        <local name="exec.which.rpmbuild.output"/>
        <exec executable="command" failifexecutionfails="false" failonerror="false" resultproperty="exec.which.rpmbuild.result" outputproperty="exec.which.rpmbuild.output">
            <arg line="-v rpmbuild"/>
        </exec>
        <condition property="missing.rpmbuild">
            <not><and>
                <isset property="exec.which.rpmbuild.result"/>
                <equals arg1="${exec.which.rpmbuild.result}" arg2="0"/>
                <isset property="exec.which.rpmbuild.output"/>
                <not><equals arg1="${exec.which.rpmbuild.output}" arg2=""/></not>
            </and></not>
        </condition>
    </target>
    <target name="-check-native-packager-external-tools" depends="-check-Inno-presence, -check-WiX-presence, -check-dpkg-presence, -check-rpmbuild-presence">
        <property name="missing.Inno.message" value="JavaFX native packager requires external Inno Setup 5+ tools installed and included on PATH to create EXE installer. See http://www.jrsoftware.org/"/>
        <property name="missing.WiX.message" value="JavaFX native packager requires external WiX 3.0+ tools installed and included on PATH to create MSI installer. See http://wix.sourceforge.net/"/>
        <property name="missing.dpkg.message" value="JavaFX native packager requires Debian Packager tools to create DEB package, but dpkg could not be found."/>
        <property name="missing.rpmbuild.message" value="JavaFX native packager requires RPMBuild to create RPM package, but rpmbuild could not be found."/>
        <condition property="missing.Inno.WiX">
            <and>
                <isset property="missing.Inno"/>
                <isset property="missing.WiX"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}${missing.Inno.message}${line.separator}${missing.WiX.message}" if="missing.Inno.WiX"/>
        <fail message="Error:${line.separator}${missing.Inno.message}" if="missing.Inno"/>
        <fail message="Error:${line.separator}${missing.WiX.message}" if="missing.WiX"/>
        <fail message="Error:${line.separator}${missing.dpkg.message}" if="missing.dpkg"/>
        <fail message="Error:${line.separator}${missing.rpmbuild.message}" if="missing.rpmbuild"/>
    </target>

    <!-- Project Run Support -->

    <target name="-warn-of-preloader" depends="-check-project" if="preloader-app-no-workaround">
        <fail message="Error:${line.separator}JavaFX 2 Preloader Project can not be executed directly.${line.separator}Please execute instead a JavaFX Application that uses the Preloader."/>
    </target>
    
    <target name="-mark-project-state-running">
        <property name="project.state.running" value="true"/>
        <echo message="project.state.running = ${project.state.running}" level="verbose"/>
    </target>
    <target name="-mark-project-state-debugging">
        <property name="project.state.debugging" value="true"/>
        <echo message="project.state.debugging = ${project.state.debugging}" level="verbose"/>
    </target>
    <target name="-mark-project-state-debugging-in-browser" depends="-mark-project-state-debugging">
        <property name="project.state.debugging.in.browser" value="true"/>
        <echo message="project.state.debugging.in.browser = ${project.state.debugging.in.browser}" level="verbose"/>
    </target>
    <target name="-mark-project-state-profiling">
        <property name="project.state.profiling" value="true"/>
        <echo message="project.state.profiling = ${project.state.profiling}" level="verbose"/>
    </target>
    <target name="-mark-project-needs-jnlp">
        <property name="project.needs.jnlp" value="true"/>
        <echo message="project.needs.jnlp = ${project.needs.jnlp}" level="verbose"/>
    </target>
    
    <!-- set property javafx.disable.concurrent.runs=true to disable runs from temporary directory -->
    <target name="-check-concurrent-runs">
        <condition property="disable-concurrent-runs">
            <and>
                <isset property="javafx.disable.concurrent.runs"/>
                <equals arg1="${javafx.disable.concurrent.runs}" arg2="true" trim="true"/>
            </and>
        </condition>
        <condition property="temp.run.jar" value="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}">
            <isset property="disable-concurrent-runs"/>
        </condition>
        <condition property="temp.run.jnlp" value="${jfx.deployment.jnlp}">
            <isset property="disable-concurrent-runs"/>
        </condition>
        <condition property="temp.run.html" value="${jfx.deployment.html}">
            <isset property="disable-concurrent-runs"/>
        </condition>
    </target>
    <target name="-create-temp-run-dir" depends="-check-concurrent-runs" unless="disable-concurrent-runs">
        <echo message="Creating temp run dir" level="verbose"/>
        <tempfile property="temp.run.dir" destDir="${basedir}${file.separator}${dist.dir}${file.separator}" prefix="run"/>
        <echo message="temp.run.dir = ${temp.run.dir}" level="verbose"/>
        <copy todir="${temp.run.dir}" includeemptydirs="true" overwrite="true">
            <fileset dir="${basedir}${file.separator}${dist.dir}">
                <exclude name="**${file.separator}bundles${file.separator}**"/>
                <exclude name="**${file.separator}run*${file.separator}**"/>
            </fileset>
        </copy>        
        <property name="temp.run.jar" value="${temp.run.dir}${file.separator}${jfx.deployment.jar}"/>
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="temp.run.jnlp" value="${temp.run.dir}${file.separator}${jfx.deployment.base}.jnlp"/>
        <property name="temp.run.html" value="${temp.run.dir}${file.separator}${jfx.deployment.base}.html"/>
    </target>
    <target name="-remove-temp-run-dir" if="temp.run.dir">
        <echo message="Removing temp run dir" level="verbose"/>
        <delete dir="${temp.run.dir}" quiet="true" failonerror="false"/>
    </target>
    <target depends="init,compile,jar,-create-temp-run-dir" description="Run JavaFX project standalone." name="jfx-project-run">
        <echo message="Executing ${temp.run.jar} using platform ${platform.java}"/>
        <property name="run.jvmargs" value=""/>
        <property name="run.jvmargs.ide" value=""/>        
        <java jar="${temp.run.jar}" dir="${work.dir}" fork="true" jvm="${platform.java}">
            <jvmarg line="${endorsed.classpath.cmd.line.arg}"/>
            <jvmarg value="-Dfile.encoding=${runtime.encoding}"/>
            <redirector errorencoding="${runtime.encoding}" inputencoding="${runtime.encoding}" outputencoding="${runtime.encoding}"/>
            <jvmarg line="${run.jvmargs}"/>
            <jvmarg line="${run.jvmargs.ide}"/>
            <classpath>
                <path path="${temp.run.jar}:${javac.classpath}"/>
            </classpath>
            <arg line="${application.args}"/>
            <syspropertyset>
                <propertyref prefix="run-sys-prop."/>
                <mapper from="run-sys-prop.*" to="*" type="glob"/>
            </syspropertyset>
        </java>
        <antcall target="-remove-temp-run-dir"/>
    </target>
    <target depends="init,compile,jar,-create-temp-run-dir,-debug-start-debugger" description="Debug JavaFX project standalone." name="jfx-project-debug">
        <echo message="Executing ${temp.run.jar} using platform ${platform.java}"/>
        <property name="run.jvmargs" value=""/>
        <property name="run.jvmargs.ide" value=""/>        
        <java jar="${temp.run.jar}" dir="${work.dir}" fork="true" jvm="${platform.java}">
            <jvmarg line="${endorsed.classpath.cmd.line.arg}"/>
            <jvmarg line="${debug-args-line}"/>
            <jvmarg value="-Xrunjdwp:transport=${debug-transport},address=${jpda.address}"/>
            <jvmarg value="-Dglass.disableGrab=true"/>
            <jvmarg value="-Dfile.encoding=${runtime.encoding}"/>
            <redirector errorencoding="${runtime.encoding}" inputencoding="${runtime.encoding}" outputencoding="${runtime.encoding}"/>
            <jvmarg line="${run.jvmargs}"/>
            <jvmarg line="${run.jvmargs.ide}"/>
            <classpath>
                <path path="${temp.run.jar}:${javac.classpath}"/>
            </classpath>
            <arg line="${application.args}"/>
            <syspropertyset>
                <propertyref prefix="run-sys-prop."/>
                <mapper from="run-sys-prop.*" to="*" type="glob"/>
            </syspropertyset>
        </java>
        <antcall target="-remove-temp-run-dir"/>
    </target>


    <!-- Running/Debugging/Profiling Standalone -->

    <target name="jfxsa-run" depends="-mark-project-state-running,-clean-if-config-changed,-check-jfx-runtime,-warn-of-preloader,jfx-project-run"/>
    <target name="jfxsa-run-noscript" depends="-set-fallback-no-javascript, jfxsa-run"/>

    <target name="jfxsa-debug" depends="-mark-project-state-debugging,-clean-if-config-changed,jar,-check-jfx-runtime,-warn-of-preloader,jfx-project-debug"/>
    <target name="jfxsa-debug-noscript" depends="-set-fallback-no-javascript, jfxsa-debug"/>
    
    <target name="jfxsa-profile" depends="-mark-project-state-profiling,-check-jfx-runtime,-warn-of-preloader,jfx-project-profile"/>
    <target name="jfxsa-profile-noscript" depends="-set-fallback-no-javascript, jfxsa-profile"/>

    <target name="-check-clean-if-config-changed" depends="-init-project">
        <deploy-defines/>
        <uptodate property="jfx.deployment.jar.newer.than.nbproject" targetfile="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" >
            <srcfiles dir="${basedir}${file.separator}nbproject" includes="**${file.separator}*"/>
        </uptodate>
        <echo message="jfx.deployment.jar.newer.than.nbproject = ${jfx.deployment.jar.newer.than.nbproject}" level="verbose"/>
        <available file="${jfx.deployment.dir}${file.separator}${jfx.deployment.jar}" type="file" property="jfx.deployment.jar.exists"/>
        <condition property="request.clean.due.to.config.change">
            <and>
                <isset property="jfx.deployment.jar.exists"/>
                <not><isset property="jfx.deployment.jar.newer.than.nbproject"/></not>
            </and>
        </condition>
    </target>
    <target name="-clean-if-config-changed" depends="-check-clean-if-config-changed" if="request.clean.due.to.config.change">
        <echo message="Config change detected. Invoking clean." level="verbose"/>
        <antcall target="clean"/>
    </target>
    
    <target depends="-profile-check-1,-profile-pre72" description="Profile a project in the IDE." if="profiler.configured" name="jfx-project-profile" unless="profiler.info.jvmargs.agent">
        <startprofiler/>
        <antcall target="jfxsa-run"/>
    </target>

    <!-- Shared Debugging init -->

    <target name="-init-debug-args">
        <property name="version-output" value="java version &quot;${ant.java.version}"/>
        <condition property="have-jdk-older-than-1.4">
            <or>
                <contains string="${version-output}" substring="java version &quot;1.0"/>
                <contains string="${version-output}" substring="java version &quot;1.1"/>
                <contains string="${version-output}" substring="java version &quot;1.2"/>
                <contains string="${version-output}" substring="java version &quot;1.3"/>
            </or>
        </condition>
        <condition else="-Xdebug" property="debug-args-line" value="-Xdebug -Xnoagent -Djava.compiler=none">
            <istrue value="${have-jdk-older-than-1.4}"/>
        </condition>
        <condition else="dt_socket" property="debug-transport-by-os" value="dt_shmem">
            <os family="windows"/>
        </condition>
        <condition else="${debug-transport-by-os}" property="debug-transport" value="${debug.transport}">
            <isset property="debug.transport"/>
        </condition>
    </target>


    <!-- Running/Debugging/Profiling as WebStart -->

    <target name="-check-jnlp-file-fx" depends="-swing-api-check" unless="fx-in-swing-app-workaround">
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="jfx.deployment.jnlp" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}.jnlp"/>
    </target>
    <target name="-check-jnlp-file-swing" depends="-swing-api-check" if="fx-in-swing-app-workaround">
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="jfx.deployment.jnlp" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}_application.jnlp"/>
    </target>
    <target name="-check-jnlp-file" depends="-check-jnlp-file-fx,-check-jnlp-file-swing">
        <condition property="jnlp-file-exists">
            <available file="${jfx.deployment.jnlp}"/>
        </condition>
        <condition property="jnlp-file-exists+netbeans.home">
            <and>
                <isset property="jnlp-file-exists"/>
                <isset property="netbeans.home"/>
            </and>
        </condition>
    </target>

    <target name="-resolve-jnlp-file" depends="-check-jnlp-file" unless="jnlp-file-exists">
        <antcall target="jfx-deployment"/>
        <antcall target="-check-jnlp-file"/>
    </target>

    <!-- set property javafx.enable.concurrent.external.runs=true to enable multiple runs of the same WebStart or Run-in-Browser project -->
    <target name="-check-concurrent-jnlp-runs" depends="-resolve-jnlp-file">
        <condition property="disable-concurrent-runs">
            <not>
                <and>
                    <isset property="javafx.enable.concurrent.external.runs"/>
                    <equals arg1="${javafx.enable.concurrent.external.runs}" arg2="true" trim="true"/>
                </and>
            </not>
        </condition>
        <condition property="temp.run.jnlp" value="${jfx.deployment.jnlp}">
            <isset property="disable-concurrent-runs"/>
        </condition>
    </target>
    <target name="-warn-concurrent-jnlp-runs" unless="disable-concurrent-runs">
        <echo message="Note: Concurrent Run as WebStart enabled.${line.separator}Temporary directory ${temp.run.dir}${line.separator}will remain unused when WebStart execution has finished. Use project Clean to delete unused directories."/>
    </target>

    <target name="jfxws-run" if="jnlp-file-exists" depends="-mark-project-state-running,-clean-if-config-changed,-mark-project-needs-jnlp,-check-jdk-7u4or5-mac,jar,
            -check-jfx-webstart,-resolve-jnlp-file,-check-jfx-runtime,-check-concurrent-jnlp-runs,-create-temp-run-dir,-warn-insufficient-signing" 
            description="Start JavaFX javaws execution">
        <echo message="Executing ${temp.run.jnlp} using ${active.webstart.executable}"/>
        <exec executable="${active.webstart.executable}">
            <arg file="${temp.run.jnlp}"/>
        </exec>
        <antcall target="-warn-concurrent-jnlp-runs"/>
    </target>
    
    <target name="jfxws-debug" if="jnlp-file-exists+netbeans.home" depends="-mark-project-state-debugging,-clean-if-config-changed,-mark-project-needs-jnlp,
            -check-jdk-7u4or5-mac,jar,-check-jfx-webstart,-resolve-jnlp-file,-check-jfx-runtime,-warn-insufficient-signing,
            -debug-start-debugger,-debug-javaws-debuggee" description="Debug JavaFX javaws project in IDE"/>
        
    <target name="-debug-javaws-debuggee" depends="-init-debug-args">
        <echo message="Executing ${jfx.deployment.jnlp} in debug mode using ${active.webstart.executable}"/>
        <exec executable="${active.webstart.executable}">
            <env key="JAVAWS_VM_ARGS" value="${debug-args-line} -Xrunjdwp:transport=${debug-transport},address=${jpda.address} -Dglass.disableGrab=true"/>
            <arg value="-wait"/>
            <arg file="${jfx.deployment.jnlp}"/>
        </exec>
    </target>
    
    <target name="-profile-check-1">
        <property name="run.jvmargs.ide" value=""/>        
        <condition property="profiler.configured">
            <or>
                <contains casesensitive="true" string="${run.jvmargs.ide}" substring="-agentpath:"/>
                <contains casesensitive="true" string="${run.jvmargs.ide}" substring="-javaagent:"/>
            </or>
        </condition>
    </target>
    
    <target if="jnlp-file-exists+netbeans.home" name="-profile-check-jnlp">
        <antcall target="-profile-check-1"/>
    </target>
    
    <target name="-do-jfxws-profile" depends="-mark-project-state-profiling,-mark-project-needs-jnlp,
            -check-jdk-7u4or5-mac,jar,-check-jfx-webstart,-resolve-jnlp-file,-check-jfx-runtime,-warn-insufficient-signing">
        <echo message="Executing ${jfx.deployment.jnlp} in profile mode using ${active.webstart.executable}"/>
        <property name="run.jvmargs.ide" value=""/>        
        <exec executable="${active.webstart.executable}">
            <env key="JAVAWS_VM_ARGS" value="${run.jvmargs.ide}"/>
            <arg value="-wait"/>
            <arg file="${jfx.deployment.jnlp}"/>
        </exec>
    </target>
    
    <target name="jfxws-profile" if="profiler.configured" 
        depends="-profile-check-1"
        description="Profile JavaFX javaws project in IDE">
        <startprofiler/>
        <antcall target="-do-jfxws-profile"/>
    </target>
    
    <target name="jfxws-run-noscript" depends="-set-fallback-no-javascript, jfxws-run"/>

    <target name="jfxws-debug-noscript" depends="-set-fallback-no-javascript, jfxws-debug"/>

    <target name="jfxws-profile-noscript" depends="-set-fallback-no-javascript, jfxws-profile"/>


    <!-- Running/Debugging/Profiling in Browser -->

    <target name="-check-selected-browser-path" depends="-check-default-run-config">
        <condition property="javafx.run.inbrowser.undefined">
            <or>
                <and>
                    <isset property="javafx.run.inbrowser"/>
                    <equals arg1="${javafx.run.inbrowser}" arg2="undefined"/>
                </and>
                <and>
                    <isset property="javafx.run.inbrowser.path"/>
                    <equals arg1="${javafx.run.inbrowser.path}" arg2="undefined"/>
                </and>
            </or>
        </condition>
        <condition property="javafx.run.inbrowser.path-exists">
            <and>
                <isset property="javafx.run.inbrowser.path"/>
                <available file="${javafx.run.inbrowser.path}"/>
            </and>
        </condition>
        <fail message="Error:${line.separator}Browser selection not recognizable from ${config} run configuration.${line.separator}Please go to Project Properties dialog, category Run, to select a valid browser." unless="javafx.run.inbrowser.path"/>
        <fail message="Error:${line.separator}No browser defined in ${config} run configuration.${line.separator}Please verify in Tools->Options dialog that NetBeans recognizes a valid browser, then go to Project Properties dialog, category Run, to select a valid browser." if="javafx.run.inbrowser.undefined"/>
        <fail message="Error:${line.separator}Browser ${javafx.run.inbrowser.path} referred from ${config} run configuration can not be found.${line.separator}(This can happen, e.g, when the JavaFX Project is transferred to another system.)${line.separator}Please go to Project Properties dialog, category Run, to select a valid browser." unless="javafx.run.inbrowser.path-exists"/>
    </target>

    <target name="-substitute-template-processed-html-file" depends="-check-project" if="html-template-available">
        <deploy-process-template/>
    </target>
    <target name="-check-template-processed-html-file" depends="-substitute-template-processed-html-file">
        <condition property="html-file-exists">
            <and>
                <isset property="html-template-available"/>
                <available file="${javafx.run.htmltemplate.processed}"/>
            </and>
        </condition>
    </target>
    
    <target name="-set-template-processed-html-file" depends="-check-template-processed-html-file" if="html-file-exists">
        <property name="jfx.deployment.html" location="${javafx.run.htmltemplate.processed}"/>
    </target>
    
    <target name="-set-html-file" depends="-set-template-processed-html-file" unless="html-file-exists">
        <basename property="jfx.deployment.base" file="${jfx.deployment.jar}" suffix=".jar"/>
        <property name="jfx.deployment.html" location="${jfx.deployment.dir}${file.separator}${jfx.deployment.base}.html"/>
        <condition property="html-file-exists">
            <available file="${jfx.deployment.html}"/>
        </condition>
        <condition property="html-file-exists+netbeans.home">
            <and>
                <isset property="html-file-exists"/>
                <isset property="netbeans.home"/>
            </and>
        </condition>
    </target>

    <!-- set property javafx.enable.concurrent.external.runs=true to enable multiple runs of the same WebStart or Run-in-Browser project -->
    <target name="-check-concurrent-html-runs" depends="-set-html-file">
        <condition property="disable-concurrent-runs">
            <or>
                <not>
                    <and>
                        <isset property="javafx.enable.concurrent.external.runs"/>
                        <equals arg1="${javafx.enable.concurrent.external.runs}" arg2="true" trim="true"/>
                    </and>
                </not>
                <and>
                    <isset property="html-template-available"/>
                    <available file="${javafx.run.htmltemplate.processed}"/>
                </and>
            </or>
        </condition>
        <condition property="temp.run.html" value="${jfx.deployment.html}">
            <isset property="disable-concurrent-runs"/>
        </condition>
    </target>
    <target name="-warn-concurrent-html-runs" unless="disable-concurrent-runs">
        <echo message="Note: Concurrent Run in Browser enabled.${line.separator}Temporary directory ${temp.run.dir}${line.separator}will remain unused when execution in browser has finished. Use project Clean to delete unused directories."/>
    </target>

    <target name="jfxbe-run" if="html-file-exists" depends="-mark-project-state-running,-clean-if-config-changed,-mark-project-needs-jnlp,-check-jdk-7u4or5-mac,jar,
            -check-selected-browser-path,-set-html-file,-check-jfx-runtime,-check-concurrent-html-runs,-create-temp-run-dir,-warn-insufficient-signing"
            description="Start JavaFX execution in browser">
        <echo message="Executing ${temp.run.html} using ${javafx.run.inbrowser}"/>
        <echo message="(${javafx.run.inbrowser.path})"/>
        <property name="javafx.run.inbrowser.arguments" value=""/>
        <exec executable="${javafx.run.inbrowser.path}">
            <arg line="${javafx.run.inbrowser.arguments}"/>
            <arg file="${temp.run.html}"/>
        </exec>
        <antcall target="-warn-concurrent-html-runs"/>
    </target>
    
    <target name="jfxbe-debug" if="html-file-exists+netbeans.home" depends="-mark-project-state-debugging-in-browser,-init-debug-args,
            clean,-debug-start-debugger,-mark-project-needs-jnlp,-check-jdk-7u4or5-mac,jar,
            -check-selected-browser-path,-set-html-file,-check-jfx-runtime,-warn-insufficient-signing,
            -debug-jfxbe-debuggee" description="Debug JavaFX project in browser">
        <!-- after the session clean up the jnlp containing debug settings -->
        <antcall target="clean"/>
    </target>
        
    <target name="-debug-jfxbe-debuggee" depends="-init-debug-args">
        <echo message="Executing ${jfx.deployment.html} in debug mode using ${javafx.run.inbrowser}"/>
        <echo message="(${javafx.run.inbrowser.path})"/>
        <property name="javafx.run.inbrowser.arguments" value=""/>
        <exec executable="${javafx.run.inbrowser.path}">
            <arg line="${javafx.run.inbrowser.arguments}"/>
            <env key="_JPI_VM_OPTIONS" value="-agentlib:jdwp=transport=${debug-transport},address=${jpda.address}"/>
            <arg file="${jfx.deployment.html}"/>
        </exec>
    </target>

    <target if="html-file-exists+netbeans.home" name="-profile-check-html">
        <antcall target="-profile-check-1"/>
    </target>

    <target name="-do-jfxbe-profile" depends="-mark-project-state-profiling,-mark-project-needs-jnlp,
            -check-jdk-7u4or5-mac,jar,-check-selected-browser-path,-set-html-file,-check-jfx-runtime,-warn-insufficient-signing">
        <echo message="Executing ${jfx.deployment.html} in profile mode using ${javafx.run.inbrowser}"/>
        <echo message="(${javafx.run.inbrowser.path})"/>
        <property name="run.jvmargs.ide" value=""/>
        <property name="javafx.run.inbrowser.arguments" value=""/>
        <exec executable="${javafx.run.inbrowser.path}">
            <arg line="${javafx.run.inbrowser.arguments}"/>
            <env key="_JPI_VM_OPTIONS" value="${run.jvmargs.ide}"/>
            <arg file="${jfx.deployment.html}"/>
        </exec>
    </target>

    <target name="jfxbe-profile" if="profiler.configured"
        depends="-profile-check-html"
        description="Profile JavaFX project in browser">
        <startprofiler/>
        <antcall target="-do-jfxbe-profile"/>
    </target>

    <target name="jfxbe-run-noscript" depends="-set-fallback-no-javascript, jfxbe-run"/>

    <target name="jfxbe-debug-noscript" depends="-set-fallback-no-javascript, jfxbe-debug"/>

    <target name="jfxbe-profile-noscript" depends="-set-fallback-no-javascript, jfxbe-profile"/>


</project>
